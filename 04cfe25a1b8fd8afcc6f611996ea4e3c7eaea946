{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "9c514c26_34422e83",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2025-08-29T21:57:19Z",
      "side": 1,
      "message": "As I understand it, before this PR ,IntelCPU has been reading a GPIO pin for CPU presence (optiona) and effectively discarding the value.\n\nThis saves the result of the GPIO read to the CPUConfig object that\u0027s created for each EntityManager CPU stanza so it can be referenced later -- like when deciding if we need to scan an empty CPU slot or not.",
      "revId": "04cfe25a1b8fd8afcc6f611996ea4e3c7eaea946",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "737becb6_34044306",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2026-01-16T19:24:43Z",
      "side": 1,
      "message": "A quick summary of this change to maybe give it a bump:\n\nThis change prevents unnecessary scanning of empty CPU sockets by tracking CPU presence information in the CPUConfig structure.\n\nProblem solved: \n\nEmpty CPU sockets were being repeatedly scanned every second, causing peci_SetDevName() to log events that filled the journal with messages like:\n\u003eintelcpusensor[456]: PECI set dev name to /dev/peci-0\n\nHow it solves:\n\nBy checking the present flag (typically read from a GPIO pin defined in Entity Manager CPU stanza), the code now skips scanning of known-empty sockets. The present flag was being read previously, but nothing was being done with that result (if I\u0027m remembering correctly).",
      "revId": "04cfe25a1b8fd8afcc6f611996ea4e3c7eaea946",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "891059a6_40011158",
        "filename": "src/intel-cpu/IntelCPUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 91,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2025-08-29T21:57:19Z",
      "side": 1,
      "message": "When creating a CPUConfig object, we\u0027re already (optionally) doing a GPIO pin read to determine expected CPU slot population.\n\nPreviously we were tossing the value out, but now we save that info, and can use it to skip unnecessary scanning of known-empty CPU slots.",
      "revId": "04cfe25a1b8fd8afcc6f611996ea4e3c7eaea946",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "439b10d0_7fe22633",
        "filename": "src/intel-cpu/IntelCPUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 91,
      "author": {
        "id": 1002560
      },
      "writtenOn": "2026-01-16T19:48:51Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "891059a6_40011158",
      "revId": "04cfe25a1b8fd8afcc6f611996ea4e3c7eaea946",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6beb551e_a5ad154c",
        "filename": "src/intel-cpu/IntelCPUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 507,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2025-08-29T21:57:19Z",
      "side": 1,
      "message": "adding a config.present check here allows us to skip further scanning of a slot (which triggers PECI sys log messages) for a slot flagged as not-present (generally via a GPIO pin check defined in the Entity Manager CPU stanza)",
      "revId": "04cfe25a1b8fd8afcc6f611996ea4e3c7eaea946",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a43259ea_3da49084",
        "filename": "src/intel-cpu/IntelCPUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 507,
      "author": {
        "id": 1002560
      },
      "writtenOn": "2026-01-16T19:48:51Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "6beb551e_a5ad154c",
      "revId": "04cfe25a1b8fd8afcc6f611996ea4e3c7eaea946",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "373ecfda_fae524fb",
        "filename": "src/intel-cpu/IntelCPUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 751,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2025-08-30T19:26:28Z",
      "side": 1,
      "message": "You can see how \u0027present\u0027 was originally being handled here -- a \u003cctrl+F\u003e \"present\" -- the GPIO Pin value is read as a boolean, written to dbus under ..Item.Present, and then discarded.\n\nLater checks against the CPUConfig object aren\u0027t querying dbus for presence info -- and I think it makes more sense anyways to save the presence reading to CPUConfig on initial creation for easy access later.\n\nRight now, we\u0027re just saving the data to dbus on initial creation, then never touching it again.",
      "revId": "04cfe25a1b8fd8afcc6f611996ea4e3c7eaea946",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "51f48deb_10604745",
        "filename": "src/intel-cpu/IntelCPUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 751,
      "author": {
        "id": 1002560
      },
      "writtenOn": "2026-01-16T19:48:51Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "373ecfda_fae524fb",
      "revId": "04cfe25a1b8fd8afcc6f611996ea4e3c7eaea946",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e23bbd9c_b122da00",
        "filename": "src/intel-cpu/IntelCPUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 796,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2025-08-29T21:57:19Z",
      "side": 1,
      "message": "tracking CPU \u0027presence\u0027 (based on GPIO pin reads) in cpuConfigs allows us to tell if a given CPU slot (as called out in an Entity-Manager stanza) is expected to be empty.\n\nThis can help us avoid doing things like repeatedly trying to check an empty slot to see if it\u0027s been populated and flooding syslog with PECI status messages.",
      "revId": "04cfe25a1b8fd8afcc6f611996ea4e3c7eaea946",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "84cdd7f3_ad506619",
        "filename": "src/intel-cpu/IntelCPUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 796,
      "author": {
        "id": 1002560
      },
      "writtenOn": "2026-01-16T19:48:51Z",
      "side": 1,
      "message": "Acknowledged",
      "parentUuid": "e23bbd9c_b122da00",
      "revId": "04cfe25a1b8fd8afcc6f611996ea4e3c7eaea946",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}