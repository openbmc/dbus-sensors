{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "8cd7b2eb_43ef5820",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 13,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "Just so you\u0027re aware, as a general rule, these kinds of abstractions tend to conflict directly with the OpenBMC core principals, namely:\n- Code should be clear and concise.\n- Code should be performant.\n\nWith that said, I\u0027m happy and open to have a discussion if this MVC pattern can meet those requirements when compared to a simpler approach.  Keep in mind, in the cases where we\u0027ve tried this pattern before, binary size became a problem given the compilers inability to optimize across virtualized boundaries, but again.... happy to have a discussion and find something that meets the requirements.",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 13,
        "endChar": 71
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "356c06c4_cdd08a5c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 9
      },
      "lineNbr": 13,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "Sound good. It will pleasure to chat about the design pattern. I am available on discord (Haoj#1417) at pacific times.",
      "parentUuid": "8cd7b2eb_43ef5820",
      "range": {
        "startLine": 13,
        "startChar": 0,
        "endLine": 13,
        "endChar": 71
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f9d74ede_a20d5e18",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "An excellent start.  Keep up the good work!",
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f8f1dd55_d3c2c156",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2022-09-16T03:50:26Z",
      "side": 1,
      "message": "Hi Hao Jiang, thanks for your work here. I\u0027d like to see the clang-tidy issues addressed (some of them suggested some restructuring might be required) and then I\u0027ll take a closer look.",
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6207a64b_73df917f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-19T16:56:41Z",
      "side": 1,
      "message": "Hi Ed and Willy, \n\nThanks for the informative reply. I am going through all of them and will reply in place. ",
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ef82f586_a6f5b377",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-19T16:58:03Z",
      "side": 1,
      "message": "Hi Andrew, \n\nSure I will fix the the minor issues. Suggestion are welcome. Thanks in advance.",
      "parentUuid": "f8f1dd55_d3c2c156",
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e7d03c5f_34f8189c",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 9
      },
      "lineNbr": 0,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T00:43:56Z",
      "side": 1,
      "message": "There are couple of questions related to using rtti for NVMeIntf. I am trying to explain it in a concentrated place. We can continue the chat in this thread or via the concord. \n\nLet\u0027s started with the MVC model. So NVMeIntf is the Model(M) here and the NVMeSubsys is the Control(C). \n\nM and C are independent components in this model and C should not be the factory class of M. which means we should not do inside of NVMeSubsys smt like: \n\n```\nNVMeSubsys{\n  if (NVMe_Basic)\n    create M1_NVMeBasicIntf\n  else \n    create M2_NVMeMiIntf\n}\n```\n\nThus we need a unified way to describe M to C. There are couple of ways I thought about: \n1. A data coupling model, such as SQL query, XML layout, data sequentializer(like protobuf/rpc).\n2. C++ vtable/runtime type info\n3. C++ template / compile time type info \n\nI went to (2) because: \n* (1) is over killing for the light weight program of openbmc daemon. \n* (3) Makes the readability issue of template-everywhere and code size expansion.\n\nI am not sure how much rtti will impact the performance or stability. I assume dynamic_cast and smart ptr cast will be secure enough from exception? ",
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c7a7f311_34b06f5c",
        "filename": "include/NVMeBasic.hpp",
        "patchSetId": 9
      },
      "lineNbr": 30,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-09-09T21:58:13Z",
      "side": 1,
      "message": "uint32_t? since won\u0027t be negative?\n\num... seems like it was int before the chanage.",
      "range": {
        "startLine": 30,
        "startChar": 43,
        "endLine": 30,
        "endChar": 60
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5b44250b_04b9345c",
        "filename": "include/NVMeBasic.hpp",
        "patchSetId": 9
      },
      "lineNbr": 30,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "\"wont be negative\" isn\u0027t always the best way to determine uint versus int.  in certain cases, the native type can be transformed to processor specific code more easily and with less code, because it essentially represents the processors native type.  When compared to uint, the compiler has more freedom on what to do in overflow behavior, so generally the rule is \"use int as a default, unless you have a good reason not to\" of which there are numerous reasons not to, STL container usage (which many have argued should\u0027ve used int as size_t for performance reasons, but obviously can\u0027t be changed now)\n\nIn this case, because bus is an arbitrary index, we use what the kernel uses, which is int, which is why this code uses int.\n\nhttps://gitlab.brokenpipe.de/bricolage/libi2c/-/blob/master/libsmbus.h#L29",
      "parentUuid": "c7a7f311_34b06f5c",
      "range": {
        "startLine": 30,
        "startChar": 43,
        "endLine": 30,
        "endChar": 60
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "95af9a31_1629a6da",
        "filename": "include/NVMeBasic.hpp",
        "patchSetId": 9
      },
      "lineNbr": 30,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-09-16T17:37:40Z",
      "side": 1,
      "message": "oh interesting. Thanks for the info.",
      "parentUuid": "5b44250b_04b9345c",
      "range": {
        "startLine": 30,
        "startChar": 43,
        "endLine": 30,
        "endChar": 60
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c1463aa7_51b1eec2",
        "filename": "include/NVMeBasic.hpp",
        "patchSetId": 9
      },
      "lineNbr": 49,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-09-09T21:58:13Z",
      "side": 1,
      "message": "nit: newline.",
      "range": {
        "startLine": 49,
        "startChar": 0,
        "endLine": 49,
        "endChar": 2
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f29292a9_81b5712f",
        "filename": "include/NVMeBasic.hpp",
        "patchSetId": 9
      },
      "lineNbr": 49,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "More specific advice..... just use clang-format.  If clang-format decides there needs to be a newline here or not, it is the right answer.",
      "parentUuid": "c1463aa7_51b1eec2",
      "range": {
        "startLine": 49,
        "startChar": 0,
        "endLine": 49,
        "endChar": 2
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7f06a341_74d869fb",
        "filename": "include/NVMeIntf.hpp",
        "patchSetId": 9
      },
      "lineNbr": 10,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "I\u0027m a little confused why this is necessary.  This is a virtual interface with only a constructor and a destructor?  Maybe this will make more sense in later patches in the series, but as written, it\u0027s not clear why it\u0027s needed.",
      "range": {
        "startLine": 5,
        "startChar": 0,
        "endLine": 10,
        "endChar": 2
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6673f067_f7b6490f",
        "filename": "include/NVMeIntf.hpp",
        "patchSetId": 9
      },
      "lineNbr": 10,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "This is the entry point for the vtable. So inheritance and virtualization converge to this base interface. \n\nPlease redirect to the thread of the NVMeIntf design. We can continue the topic there. \n\n\u003e Maybe this will make more sense in later patches in the series, but as written, it\u0027s not clear why it\u0027s needed.\n\nThe refactor is all targeting at extensibility to multiple protocol. I have done the NVMeMi part so you can use as a reference. \nhttps://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/57056/2/include/NVMeIntf.hpp#47",
      "parentUuid": "7f06a341_74d869fb",
      "range": {
        "startLine": 5,
        "startChar": 0,
        "endLine": 10,
        "endChar": 2
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8702e7a3_e43c0e9b",
        "filename": "include/NVMeIntf.hpp",
        "patchSetId": 9
      },
      "lineNbr": 13,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "Should this class be final?",
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "954359c4_bcc60f6f",
        "filename": "include/NVMeIntf.hpp",
        "patchSetId": 9
      },
      "lineNbr": 13,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "nit on naming, the term \"Interface\" (which ideally we should spell out instead of abbreviating) is overloaded here.  There\u0027s the virtual class interface, then the physical nvme interface (mctp/basic).  I think we should just call this class NVMeBasic to avoid the confusion.",
      "range": {
        "startLine": 13,
        "startChar": 6,
        "endLine": 13,
        "endChar": 19
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0324b85d_1677fe17",
        "filename": "include/NVMeIntf.hpp",
        "patchSetId": 9
      },
      "lineNbr": 13,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "No. This is interface class, not the implementation.",
      "parentUuid": "8702e7a3_e43c0e9b",
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f35aa62b_6a103355",
        "filename": "include/NVMeIntf.hpp",
        "patchSetId": 9
      },
      "lineNbr": 13,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "No, this is the interface class. The inherence rationale is: \n\nNVMeIntf (base class for NVMe Model) \n  |-NVMeBasicIntf (interface for NVMe basic protocol)\n  |  |-NVMeBasic (implementation for NVMe basic over I2C)\n  |  |-NVMeBasicMock (Mockup for NVMe basic)\n  |-NVMeMiIntf (interface for NVMe Mi protocol)\n  |  |-NVMeMi (implementation for NVMe Mi over I2C)\n  |  |-NVMeMiVdm (implementation for NVMe Mi over VDM)\n  |  |-NVMeMiMock (Mockup for NVMe Mi)\n  \n The NVMeMi is available at: https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/57056/2/include/NVMeMi.hpp#8",
      "parentUuid": "954359c4_bcc60f6f",
      "range": {
        "startLine": 13,
        "startChar": 6,
        "endLine": 13,
        "endChar": 19
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ad069b50_3e25dd6a",
        "filename": "include/NVMeIntf.hpp",
        "patchSetId": 9
      },
      "lineNbr": 13,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-30T17:57:09Z",
      "side": 1,
      "message": "3 levels of inheritance seems quite complex for something that will likely only have two available transports, but I\u0027m open to the possibility it\u0027s better.\n\nMy preference would\u0027ve been for some simple flags\n\nif (type \u003d\u003d NVMEBasic){\n   do_nvme_basic_transport()\n} else {\n   do_mctp_transport();\n}",
      "parentUuid": "0324b85d_1677fe17",
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a0254761_898de2dd",
        "filename": "include/NVMeIntf.hpp",
        "patchSetId": 9
      },
      "lineNbr": 13,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-10-03T23:30:02Z",
      "side": 1,
      "message": "NVMe basic and NVMe MI (mctp) have the different functionalities so they abstract to different interfaces. The interface is an abstraction of NVMe functionality, not the physical transportation. \n\n* the daemon will not directly talk to mctp socket or i2c fd, libnvme/libmctp will do the message construction on protocol level. \n* It is how NVMe controller aggregate the data on their internal storage. \n* It will be much easier for the daemon to optimize the performance, e.g. data, aggregation, priority scheduling, etc.",
      "parentUuid": "ad069b50_3e25dd6a",
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6e0f045e_22a97c07",
        "filename": "include/NVMeIntf.hpp",
        "patchSetId": 9
      },
      "lineNbr": 13,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2023-05-09T22:31:56Z",
      "side": 1,
      "message": "I am getting rid of dynamic_cast by using composition instead of inherence for the two interfaces.",
      "parentUuid": "a0254761_898de2dd",
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0ba6a682_fc34adf5",
        "filename": "include/NVMeIntf.hpp",
        "patchSetId": 9
      },
      "lineNbr": 25,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "+1 to \"this should be an enum class\".  Also, please ensure that when you do that, the underlying type of the enum class matches the field for which this object enum is being compared (I think uint8_t)",
      "range": {
        "startLine": 25,
        "startChar": 4,
        "endLine": 25,
        "endChar": 8
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "96256cf3_e36bbc66",
        "filename": "include/NVMeIntf.hpp",
        "patchSetId": 9
      },
      "lineNbr": 25,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "Thanks for the advise. \n\nThe enum class adds a force scope and removes the implicit type conversion (even with defining underlayer type). It is kind of against the usage for flags? since the flags is used to mask the flag bit",
      "parentUuid": "0ba6a682_fc34adf5",
      "range": {
        "startLine": 25,
        "startChar": 4,
        "endLine": 25,
        "endChar": 8
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "dd855d9a_c3f368fd",
        "filename": "include/NVMeIntf.hpp",
        "patchSetId": 9
      },
      "lineNbr": 25,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-30T17:57:09Z",
      "side": 1,
      "message": "Both of those behaviors are intentional in the coding standard.  Implicit conversions can cause bugs.",
      "parentUuid": "96256cf3_e36bbc66",
      "range": {
        "startLine": 25,
        "startChar": 4,
        "endLine": 25,
        "endChar": 8
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "14ea9647_e299a005",
        "filename": "include/NVMeIntf.hpp",
        "patchSetId": 9
      },
      "lineNbr": 25,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-10-03T23:30:02Z",
      "side": 1,
      "message": "The goal of enum class of forbidding the implicit conversion is not to cast its **index** to the underlying type, which could be buggy. As it is argued in the article(https://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0138r2.pdf): \" For all practical purposes, Index acts like a \"strong typedef\" in C++11\". \n\nI agree if the enum is used as an index for `switch`, or a template type. However, in my case, we are using the actual **value** of the flags, instead of the index/type. e.g. \n\n```\nbool notRdy \u003d message \u0026 NVME_MI_BASIC_SFLGS_DRIVE_NOT_READY;\n```\n\nIf we insist on forcing enum class in the above use case, we need either: \n* static_cast to the underlying type, which is also semantically wrong. \n* use a operator overload, which over-complex the code\n\nThe real question is, if we know the usage of the enum is to use it underlying type. And every type cast is the correct way to use it, why should we forbid the implicit cast at the very beginning? \n\nMaybe I can use a nested class as the namespace: \n\n```\nclass\n{\nstatic constexpr unit8_t NVME_MI_BASIC_SFLGS_DRIVE_NOT_READY \u003d 0x40;\nstatic constexpr unit8_t NVME_MI_BASIC_SFLGS_DRIVE_FUNCTIONAL \u003d 0x20;\n}\n```\nBut it is basically the same thing as a non-class enum.",
      "parentUuid": "dd855d9a_c3f368fd",
      "range": {
        "startLine": 25,
        "startChar": 4,
        "endLine": 25,
        "endChar": 8
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d68644b2_0b069e4e",
        "filename": "include/NVMeIntf.hpp",
        "patchSetId": 9
      },
      "lineNbr": 25,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2023-05-09T22:31:56Z",
      "side": 1,
      "message": "Just reusing the original definition for the enum. If we want to change it to constexpr, it should belong to a seperate cl.",
      "parentUuid": "14ea9647_e299a005",
      "range": {
        "startLine": 25,
        "startChar": 4,
        "endLine": 25,
        "endChar": 8
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "430761d8_69d37da0",
        "filename": "include/NVMeSubsys.hpp",
        "patchSetId": 9
      },
      "lineNbr": 5,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "Again, probably another place where we shouldn\u0027t abbreviate.",
      "range": {
        "startLine": 5,
        "startChar": 6,
        "endLine": 5,
        "endChar": 16
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a9ffbd72_35c598c1",
        "filename": "include/NVMeSubsys.hpp",
        "patchSetId": 9
      },
      "lineNbr": 5,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "430761d8_69d37da0",
      "range": {
        "startLine": 5,
        "startChar": 6,
        "endLine": 5,
        "endChar": 16
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b4be0982_9927a6c0",
        "filename": "include/NVMeSubsys.hpp",
        "patchSetId": 9
      },
      "lineNbr": 9,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-09-09T21:58:13Z",
      "side": 1,
      "message": "Is there a change for adding this to `phosphor-dbus-interface`.",
      "range": {
        "startLine": 9,
        "startChar": 9,
        "endLine": 9,
        "endChar": 51
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "386ca554_0d3de02f",
        "filename": "include/NVMeSubsys.hpp",
        "patchSetId": 9
      },
      "lineNbr": 9,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "Entity-manager configuration interfaces are not stored in phosphor-dbus-interfaces, and while that\u0027s non-ideal, there\u0027s complications with doing it that I don\u0027t want to impose on this patchset, as it\u0027s a greater question \"how do reactor interface contracts work?\"",
      "parentUuid": "b4be0982_9927a6c0",
      "range": {
        "startLine": 9,
        "startChar": 9,
        "endLine": 9,
        "endChar": 51
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7e71a029_f8aa7dc8",
        "filename": "include/NVMeSubsys.hpp",
        "patchSetId": 9
      },
      "lineNbr": 9,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-09-16T17:37:40Z",
      "side": 1,
      "message": "ACK.\n\nOh right. that make sense.",
      "parentUuid": "386ca554_0d3de02f",
      "range": {
        "startLine": 9,
        "startChar": 9,
        "endLine": 9,
        "endChar": 51
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f8f178bd_d7f642b1",
        "filename": "include/NVMeSubsys.hpp",
        "patchSetId": 9
      },
      "lineNbr": 29,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-09-09T21:58:13Z",
      "side": 1,
      "message": "const string?\n\nsince I guess we don\u0027t expect to update it after the constructor?",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 29,
        "endChar": 21
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0c9a9526_afac81f4",
        "filename": "include/NVMeSubsys.hpp",
        "patchSetId": 9
      },
      "lineNbr": 29,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "I would like not to use const member variables, given it will be really bothersome for move constructor/assignment if I need them",
      "parentUuid": "f8f178bd_d7f642b1",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 29,
        "endChar": 21
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "92373c79_d6709fda",
        "filename": "include/NVMeSubsys.hpp",
        "patchSetId": 9
      },
      "lineNbr": 29,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "I would like not to use const member variables, given it will be really bothersome for move constructor/assignment if I need them.",
      "parentUuid": "f8f178bd_d7f642b1",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 29,
        "endChar": 21
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "11fc4691_d3edbecc",
        "filename": "include/NVMeSubsys.hpp",
        "patchSetId": 9
      },
      "lineNbr": 29,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:30:59Z",
      "side": 1,
      "message": "Double click ðŸ˜®",
      "parentUuid": "92373c79_d6709fda",
      "range": {
        "startLine": 28,
        "startChar": 3,
        "endLine": 29,
        "endChar": 21
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "12db1a7c_9d2d37b5",
        "filename": "include/NVMeSubsys.hpp",
        "patchSetId": 9
      },
      "lineNbr": 44,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-09-09T21:58:13Z",
      "side": 1,
      "message": "rm?",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 44,
        "endChar": 53
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e8f9630_5e9ff185",
        "filename": "include/NVMeSubsys.hpp",
        "patchSetId": 9
      },
      "lineNbr": 44,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "+1",
      "parentUuid": "12db1a7c_9d2d37b5",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 44,
        "endChar": 53
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f1890ef2_bd4102c2",
        "filename": "include/NVMeSubsys.hpp",
        "patchSetId": 9
      },
      "lineNbr": 44,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T00:43:56Z",
      "side": 1,
      "message": "Oh sure. was Marking for future job",
      "parentUuid": "5e8f9630_5e9ff185",
      "range": {
        "startLine": 43,
        "startChar": 0,
        "endLine": 44,
        "endChar": 53
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0a108247_3a9e713c",
        "filename": "src/NVMeBasic.cpp",
        "patchSetId": 9
      },
      "lineNbr": 20,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "Given that the \"int\" type of the key here is relatively ambiguous, can you add a comment about what the mapping represents?",
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "52a6a758_c2fa135a",
        "filename": "src/NVMeBasic.cpp",
        "patchSetId": 9
      },
      "lineNbr": 20,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "Why shared_ptr here?  I don\u0027t see any shared ownership.  Can this just be a value?  Also, technically breaks the coding standard \n\nhttps://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Ri-global",
      "range": {
        "startLine": 20,
        "startChar": 14,
        "endLine": 20,
        "endChar": 29
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c0487f2b_b211c148",
        "filename": "src/NVMeBasic.cpp",
        "patchSetId": 9
      },
      "lineNbr": 20,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "\u003e Why shared_ptr here?  I don\u0027t see any shared ownership.  Can this just be a value?  \n\nBecause a NVMeBasicIO is shared by multiple NVMeBasic instances which are on the same i2c bus. \n\nhttps://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/56851/9/include/NVMeBasic.hpp#48\n\nthe smart ptr is used to release the IO resource after the last device on the i2c bus is closed. \n\n\u003e Also, technically breaks the coding standard \n\u003e \n\u003e https://isocpp.github.io/CppCoreGuidelines/CppCoreGuidelines#Ri-global\n\nI saw a couple of examples using the same style (e.g. https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/56851/9/src/NVMeSensorMain.cpp#b25), though it should be defined as static to make it constrained in this modular. \n\nI can make it static private member variable but I was thinking it was not necessary. \n\nPlease feel free to reopen if you have further concern about it.",
      "parentUuid": "52a6a758_c2fa135a",
      "range": {
        "startLine": 20,
        "startChar": 14,
        "endLine": 20,
        "endChar": 29
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a4d4c137_90ba7f75",
        "filename": "src/NVMeBasic.cpp",
        "patchSetId": 9
      },
      "lineNbr": 20,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "The map is \u003crootBusNumber, NVMeBasicIO\u003e. It makes sure all i2c devices behind the mux will share the same IO and no concurrent transaction happens across these devices. \n\nAdded a comment for the map.",
      "parentUuid": "0a108247_3a9e713c",
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "843aa5d6_8dc51c7f",
        "filename": "src/NVMeBasic.cpp",
        "patchSetId": 9
      },
      "lineNbr": 183,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "Just so you\u0027re aware, now that we have uring turned on, this whole class can probably cease to exist.  uring gives us the ability to async read/write from file handles that wouldn\u0027t normally be that way, so\n\n- NVMe Basic doesn\u0027t need this class for non-blocking IO.\n- MCTP in the kernel uses the sockets API, which never needed this class, as we can already do non-blocking IO on sockets.",
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "18285ad6_77832663",
        "filename": "src/NVMeBasic.cpp",
        "patchSetId": 9
      },
      "lineNbr": 183,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-23T04:51:08Z",
      "side": 1,
      "message": "\u003e NVMe Basic doesn\u0027t need this class for non-blocking IO.\nYes. We can use uring in the future patches. We may still need the schedule the io of concurrent transfer to devices on the same i2c bus? The kernel will not do the scheduling for us, I believe. \n\n\u003e MCTP in the kernel uses the sockets API, which never needed this class, as we can already do non-blocking IO on sockets.\n\nNVMe daemon will not directly talk to mctp socket. instead the libnvme-mi will. And all libnvme/libnvme-mi functions will do blocking reading/write on IO.",
      "parentUuid": "843aa5d6_8dc51c7f",
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "3c9a132e_6a98a5bd",
        "filename": "src/NVMeBasic.cpp",
        "patchSetId": 9
      },
      "lineNbr": 185,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "Single character variable names are rarely descriptive enough.",
      "range": {
        "startLine": 185,
        "startChar": 62,
        "endLine": 185,
        "endChar": 63
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "fa9e676b_bf6742cb",
        "filename": "src/NVMeBasic.cpp",
        "patchSetId": 9
      },
      "lineNbr": 185,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "3c9a132e_6a98a5bd",
      "range": {
        "startLine": 185,
        "startChar": 62,
        "endLine": 185,
        "endChar": 63
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7b864fe3_47ff98e6",
        "filename": "src/NVMeBasic.cpp",
        "patchSetId": 9
      },
      "lineNbr": 263,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-09-09T21:58:13Z",
      "side": 1,
      "message": "Is there a better way to determine the root bus?",
      "range": {
        "startLine": 261,
        "startChar": 4,
        "endLine": 263,
        "endChar": 5
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "597404bc_449a6095",
        "filename": "src/NVMeBasic.cpp",
        "patchSetId": 9
      },
      "lineNbr": 263,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "Since this is a refactor and this part of code is part of previous implementation, I don\u0027t want to touch the logic here. Maybe we can have a fix patch individually.",
      "parentUuid": "7b864fe3_47ff98e6",
      "range": {
        "startLine": 261,
        "startChar": 4,
        "endLine": 263,
        "endChar": 5
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b29be9b5_b49a50e3",
        "filename": "src/NVMeBasic.cpp",
        "patchSetId": 9
      },
      "lineNbr": 268,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-09-09T21:58:13Z",
      "side": 1,
      "message": "http://en.cppreference.com/w/cpp/utility/from_chars instead?",
      "range": {
        "startLine": 268,
        "startChar": 11,
        "endLine": 268,
        "endChar": 46
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8cb3ce45_5778a847",
        "filename": "src/NVMeBasic.cpp",
        "patchSetId": 9
      },
      "lineNbr": 268,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "I would like not to change the logic from previous implementation, given this is a refactor patch.",
      "parentUuid": "b29be9b5_b49a50e3",
      "range": {
        "startLine": 268,
        "startChar": 11,
        "endLine": 268,
        "endChar": 46
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8110e19f_8240b5c4",
        "filename": "src/NVMeBasic.cpp",
        "patchSetId": 9
      },
      "lineNbr": 279,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-09-09T21:58:13Z",
      "side": 1,
      "message": "add error message",
      "range": {
        "startLine": 278,
        "startChar": 0,
        "endLine": 279,
        "endChar": 37
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "12a0e9d9_f1390060",
        "filename": "src/NVMeBasic.cpp",
        "patchSetId": 9
      },
      "lineNbr": 279,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "8110e19f_8240b5c4",
      "range": {
        "startLine": 278,
        "startChar": 0,
        "endLine": 279,
        "endChar": 37
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "bcab9dc0_f48ef5f3",
        "filename": "src/NVMeSensorMain.cpp",
        "patchSetId": 9
      },
      "lineNbr": 24,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "Note, this is exactly the kind of comment we\u0027d like to see on the other map.",
      "range": {
        "startLine": 24,
        "startChar": 0,
        "endLine": 24,
        "endChar": 45
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ae245422_011b9234",
        "filename": "src/NVMeSensorMain.cpp",
        "patchSetId": 9
      },
      "lineNbr": 155,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-09-09T21:58:13Z",
      "side": 1,
      "message": "cleanup?",
      "range": {
        "startLine": 146,
        "startChar": 0,
        "endLine": 155,
        "endChar": 9
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "d4a0b952_e585ae46",
        "filename": "src/NVMeSensorMain.cpp",
        "patchSetId": 9
      },
      "lineNbr": 155,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "Woops, forgot to delete the debug code. Thanks.",
      "parentUuid": "ae245422_011b9234",
      "range": {
        "startLine": 146,
        "startChar": 0,
        "endLine": 155,
        "endChar": 9
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0052d4c5_42c2d47e",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 85,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "The fact that we\u0027re needing to call dynamic_cast so much makes me feel like virtualization isn\u0027t the right approach here long term, as it\u0027s basically creating an abstraction, then breaking it to the point where we might be better off with no abstraction at all, aka\n\nif (type \u003d\u003d Nvme::Basic){\n   // call basic routine\n} else {\n   // call mctp routine\n}",
      "range": {
        "startLine": 85,
        "startChar": 0,
        "endLine": 85,
        "endChar": 53
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "75b75717_e95528d8",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 85,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "Created a separate thread for this topic. We can continue the talk there. But the short answer is: \n\nWe need a unified entry for the different routines. The vtable of the virtualization helps to converge to that entry.",
      "parentUuid": "0052d4c5_42c2d47e",
      "range": {
        "startLine": 85,
        "startChar": 0,
        "endLine": 85,
        "endChar": 53
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6e5a67f8_d83be5d7",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 109,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-09-09T21:58:13Z",
      "side": 1,
      "message": "flip the logic\n\n```\nif (!dynamic_cast\u003cNVMeBasicIntf*\u003e(nvmeIntf.get())){\n  throw std::runtime_error(\"Unsupported NVMe interface\");\n}\n...\n```",
      "range": {
        "startLine": 85,
        "startChar": 0,
        "endLine": 109,
        "endChar": 5
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "795db26c_6f83a451",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 109,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "this is a pattern of: \n```\nif (NVMeBasic)\n  ...\nelse if (NVMeMi)\n  ...\nelse \n  wrong! \n```\n\nReserve for future usage ðŸ˜Š",
      "parentUuid": "6e5a67f8_d83be5d7",
      "range": {
        "startLine": 85,
        "startChar": 0,
        "endLine": 109,
        "endChar": 5
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b954b196_521bd741",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 115,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "This is probably why you needed to enable RTTI?  Generally this is the kind of thing that would be encapsulated as part of the virtualized class, to prevent needing to do a dynamic cast at this level.  It might require adding some methods onto NVMeBasic that do nothing.  That is fine.",
      "range": {
        "startLine": 115,
        "startChar": 0,
        "endLine": 115,
        "endChar": 53
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "663d0d2c_8cc18696",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 115,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "\u003e This is probably why you needed to enable RTTI?  \n\nYes. It is. \n\n\u003e Generally this is the kind of thing that would be encapsulated as part of the virtualized class, to prevent needing to do a dynamic cast at this level.  It might require adding some methods onto NVMeBasic that do nothing.  That is fine.\n\nCan you be more specific what and how to encapsulate?",
      "parentUuid": "b954b196_521bd741",
      "range": {
        "startLine": 115,
        "startChar": 0,
        "endLine": 115,
        "endChar": 53
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e6b8e4e0_72b5f9eb",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 115,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2023-05-09T22:31:56Z",
      "side": 1,
      "message": "Same of removing rtti.",
      "parentUuid": "663d0d2c_8cc18696",
      "range": {
        "startLine": 115,
        "startChar": 0,
        "endLine": 115,
        "endChar": 53
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fcbf3c1c_0bdf1533",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 116,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-09-09T21:58:13Z",
      "side": 1,
      "message": "same here. flip the logic to save horizontal space.",
      "range": {
        "startLine": 114,
        "startChar": 0,
        "endLine": 116,
        "endChar": 5
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "746daa27_397398ab",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 116,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "Same as previous answer.",
      "parentUuid": "fcbf3c1c_0bdf1533",
      "range": {
        "startLine": 114,
        "startChar": 0,
        "endLine": 116,
        "endChar": 5
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b8963250_54787b0d",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 125,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "This kind of code is exactly why we disable rtti.  I\u0027m pretty ok at c++, and I\u0027m having trouble reviewing this code block for both correctness and exception safety.  Lets see if we can get this following cpp core guidelines a little close, and I\"ll bet this will get cleaned up a lot.",
      "range": {
        "startLine": 117,
        "startChar": 0,
        "endLine": 125,
        "endChar": 10
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "197c6374_66e7e625",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 125,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "I have to admit it is a bit messy to review since the nested template and definitions. And it seems I was trying to replicate what the std lib did here (https://en.cppreference.com/w/cpp/memory/shared_ptr/pointer_cast, Second version)\n\nLet me clean it up a bit. Let\u0027s see if you are still worry about this part.",
      "parentUuid": "b8963250_54787b0d",
      "range": {
        "startLine": 117,
        "startChar": 0,
        "endLine": 125,
        "endChar": 10
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "e04a8390_789465b6",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 125,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2023-05-09T22:31:56Z",
      "side": 1,
      "message": "New implementation fully get rid of rtti. PTAL",
      "parentUuid": "197c6374_66e7e625",
      "range": {
        "startLine": 117,
        "startChar": 0,
        "endLine": 125,
        "endChar": 10
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "7e0d7851_da1ac50b",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 134,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "This is currently the only place where we set up a data parser, and there\u0027s only one behavior at the moment.  There\u0027s no need to pass in a callback if there\u0027s only one type of callback.  Just make this routine a method, and have pollCtemp call it directly.",
      "range": {
        "startLine": 126,
        "startChar": 0,
        "endLine": 134,
        "endChar": 10
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "4b323863_e5cd1a76",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 134,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "Going to reuse the templated pollCtemp for NVMeMi. \n\nRefer to https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/57322/1/src/NVMeSubsys.cpp#205",
      "parentUuid": "7e0d7851_da1ac50b",
      "range": {
        "startLine": 126,
        "startChar": 0,
        "endLine": 134,
        "endChar": 10
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5610771e_d0c8e5a9",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 139,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "Another one letter template variable name.",
      "range": {
        "startLine": 139,
        "startChar": 16,
        "endLine": 139,
        "endChar": 17
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "64a52771_769cd605",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 139,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "I was always used to use a single `T` for Template. Saw other files use the same convention. e.g. https://github.com/openbmc/dbus-sensors/blob/53d2bfb5c1cc0b6600876de7dda744f5dc2e024f/include/Utils.hpp#L132\n\nAny suggestions of name convention? like Ttype, template_type_t, or so?",
      "parentUuid": "5610771e_d0c8e5a9",
      "range": {
        "startLine": 139,
        "startChar": 16,
        "endLine": 139,
        "endChar": 17
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0a783442_83606eda",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 139,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2023-05-09T22:31:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "64a52771_769cd605",
      "range": {
        "startLine": 139,
        "startChar": 16,
        "endLine": 139,
        "endChar": 17
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "87a86117_c2e1f075",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 148,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "This method is far too long to be an inline lambda.  Please break it out into it\u0027s own method with std::bind_front.",
      "range": {
        "startLine": 148,
        "startChar": 0,
        "endLine": 148,
        "endChar": 33
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c98b3a68_5a4ffd23",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 148,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T00:43:56Z",
      "side": 1,
      "message": "Ok, I created a nested class for these implementation helpers. \n\nIt works the similar way as a \u0027detail\u0027 namespace inside the source file. Since the function need to access to the private field, we need to declare them in the header for accessibility.",
      "parentUuid": "87a86117_c2e1f075",
      "range": {
        "startLine": 148,
        "startChar": 0,
        "endLine": 148,
        "endChar": 33
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "68fe505d_ff1784b6",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 184,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "We are now 2 lambda scopes deep here, which makes the readability of this stuff very difficult.  The same as the higher scoped lambda, please roll this into a method.",
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6dbbd677_578cfd46",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 184,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T00:43:56Z",
      "side": 1,
      "message": "Abstract the lambda to a detail method as well.",
      "parentUuid": "68fe505d_ff1784b6",
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "51f00fb7_3c3f855b",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 205,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-09-09T21:58:13Z",
      "side": 1,
      "message": "make this into a separate function",
      "range": {
        "startLine": 147,
        "startChar": 8,
        "endLine": 205,
        "endChar": 5
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "df9da249_18dc2d88",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 205,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "+1.",
      "parentUuid": "51f00fb7_3c3f855b",
      "range": {
        "startLine": 147,
        "startChar": 8,
        "endLine": 205,
        "endChar": 5
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ef06a8ed_45d1b67e",
        "filename": "src/NVMeSubsys.cpp",
        "patchSetId": 9
      },
      "lineNbr": 205,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T00:43:56Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "df9da249_18dc2d88",
      "range": {
        "startLine": 147,
        "startChar": 8,
        "endLine": 205,
        "endChar": 5
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8e315fc7_e78de9ec",
        "filename": "src/meson.build",
        "patchSetId": 9
      },
      "lineNbr": 148,
      "author": {
        "id": 1000885
      },
      "writtenOn": "2022-09-09T21:58:13Z",
      "side": 1,
      "message": "nit: rm.",
      "range": {
        "startLine": 148,
        "startChar": 29,
        "endLine": 148,
        "endChar": 30
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5e338e2e_37ab7feb",
        "filename": "src/meson.build",
        "patchSetId": 9
      },
      "lineNbr": 148,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "+1\n\nAlso please keep your lists like this alphabetical.\n\nAlso, while we\u0027re making this a list anyway, \"files\" isn\u0027t really appropriate here, we should be making an array of paths, similar to the below\n\nhttps://github.com/openbmc/bmcweb/blob/188cb6294105a045a445619415d01843de8c3732/meson.build#L372",
      "parentUuid": "8e315fc7_e78de9ec",
      "range": {
        "startLine": 148,
        "startChar": 29,
        "endLine": 148,
        "endChar": 30
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "6da8e4aa_d8acd248",
        "filename": "src/meson.build",
        "patchSetId": 9
      },
      "lineNbr": 148,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T00:43:56Z",
      "side": 1,
      "message": "Sure I am glad to make the change.\n\nBTW, I know each module built individually, but do you thing chronological order make more sense? Given we are actively adding more files to the project.",
      "parentUuid": "5e338e2e_37ab7feb",
      "range": {
        "startLine": 148,
        "startChar": 29,
        "endLine": 148,
        "endChar": 30
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2594ff0b_dbb54296",
        "filename": "src/meson.build",
        "patchSetId": 9
      },
      "lineNbr": 148,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-30T17:57:09Z",
      "side": 1,
      "message": "\u003e do you thing chronological order make more sense?\n\nAs a general rule we rely on alphabetical over chronological because:\nA. It has fewer merge conflicts when multiple people add items to the list.\nB. The chronological order is captured in git if it\u0027s needed.\nC. The chronological order files were added to the repo is far less important than being able to look up files quickly.",
      "parentUuid": "6da8e4aa_d8acd248",
      "range": {
        "startLine": 148,
        "startChar": 29,
        "endLine": 148,
        "endChar": 30
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "ccaebb9c_c63cc226",
        "filename": "src/meson.build",
        "patchSetId": 9
      },
      "lineNbr": 148,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-10-03T23:30:02Z",
      "side": 1,
      "message": "Make sense. Will modify. Thanks for the explanation.",
      "parentUuid": "2594ff0b_dbb54296",
      "range": {
        "startLine": 148,
        "startChar": 29,
        "endLine": 148,
        "endChar": 30
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9093ad61_38fa90f3",
        "filename": "src/meson.build",
        "patchSetId": 9
      },
      "lineNbr": 158,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2022-09-11T16:08:48Z",
      "side": 1,
      "message": "Patchsets can\u0027t just override compiler flags for a single target like this, especially for things that are explicit design patterns to avoid misuse of virtualization.  Please remove, and lets talk through the pattern that necessitated this compiler flag.",
      "range": {
        "startLine": 158,
        "startChar": 0,
        "endLine": 158,
        "endChar": 27
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a0553fbb_a8d8648c",
        "filename": "src/meson.build",
        "patchSetId": 9
      },
      "lineNbr": 158,
      "author": {
        "id": 1000857
      },
      "writtenOn": "2022-09-22T06:29:45Z",
      "side": 1,
      "message": "Sure. Let\u0027s talk in the single thread of the interface design.",
      "parentUuid": "9093ad61_38fa90f3",
      "range": {
        "startLine": 158,
        "startChar": 0,
        "endLine": 158,
        "endChar": 27
      },
      "revId": "53d2bfb5c1cc0b6600876de7dda744f5dc2e024f",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}