{
  "comments": [
    {
      "key": {
        "uuid": "9ecbc479_c21a1a72",
        "filename": "src/Thresholds.cpp",
        "patchSetId": 1
      },
      "lineNbr": 369,
      "author": {
        "id": 1000559
      },
      "writtenOn": "2021-04-28T22:14:12Z",
      "side": 1,
      "message": "I think the correct fix is to use weak_ptr. I have a WIP patch and can upload it soon for review.",
      "range": {
        "startLine": 369,
        "startChar": 29,
        "endLine": 369,
        "endChar": 39
      },
      "revId": "f06a9037641e9168024576366f8e21867f81b558",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "cb2c6fa9_852c2c2a",
        "filename": "src/Thresholds.cpp",
        "patchSetId": 1
      },
      "lineNbr": 369,
      "author": {
        "id": 1000559
      },
      "writtenOn": "2021-04-29T00:45:28Z",
      "side": 1,
      "message": "Upload a patch for reference https://gerrit.openbmc-project.xyz/c/openbmc/dbus-sensors/+/42737",
      "parentUuid": "9ecbc479_c21a1a72",
      "range": {
        "startLine": 369,
        "startChar": 29,
        "endLine": 369,
        "endChar": 39
      },
      "revId": "f06a9037641e9168024576366f8e21867f81b558",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "05c2fc64_6273b998",
        "filename": "src/Thresholds.cpp",
        "patchSetId": 1
      },
      "lineNbr": 369,
      "author": {
        "id": 1000904
      },
      "writtenOn": "2021-04-29T00:52:55Z",
      "side": 1,
      "message": "Hi Zhikui,\nCould you please also comment the advantage of using week_ptr here? \nI thought this line should move to line 381 anyway as the comments of the code review.\npair-\u003efirst.used \u003d false;",
      "parentUuid": "9ecbc479_c21a1a72",
      "range": {
        "startLine": 369,
        "startChar": 29,
        "endLine": 369,
        "endChar": 39
      },
      "revId": "f06a9037641e9168024576366f8e21867f81b558",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5bc6ed3e_17bea20d",
        "filename": "src/Thresholds.cpp",
        "patchSetId": 1
      },
      "lineNbr": 369,
      "author": {
        "id": 1000904
      },
      "writtenOn": "2021-04-29T01:12:01Z",
      "side": 1,
      "message": "Checked the patch  https://gerrit.openbmc-project.xyz/c/openbmc/dbus-sensors/+/42737\nAnd the fix point of the two patches are different and they can work together as the comments \nhttps://gerrit.openbmc-project.xyz/c/openbmc/dbus-sensors/+/42737/1/src/Thresholds.cpp#378",
      "parentUuid": "05c2fc64_6273b998",
      "range": {
        "startLine": 369,
        "startChar": 29,
        "endLine": 369,
        "endChar": 39
      },
      "revId": "f06a9037641e9168024576366f8e21867f81b558",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "228846c3_5f827ff5",
        "filename": "src/Thresholds.cpp",
        "patchSetId": 1
      },
      "lineNbr": 369,
      "author": {
        "id": 1000559
      },
      "writtenOn": "2021-04-29T01:45:13Z",
      "side": 1,
      "message": "There is a race condition, cancel timer and destruct of timer do not remove already queued handler.\nPlus, timer can also be cancelled without being destructed.\nHaving said that, this is definitely a bug because pair can be a dangling pointer.",
      "parentUuid": "5bc6ed3e_17bea20d",
      "range": {
        "startLine": 369,
        "startChar": 29,
        "endLine": 369,
        "endChar": 39
      },
      "revId": "f06a9037641e9168024576366f8e21867f81b558",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8d9a8084_494eb6b4",
        "filename": "src/Thresholds.cpp",
        "patchSetId": 1
      },
      "lineNbr": 381,
      "author": {
        "id": 1000559
      },
      "writtenOn": "2021-04-29T16:02:19Z",
      "side": 1,
      "message": "Like we talked about, if there is code cancel timer and continue (without destructing) we could have memory leaks without this flag get cleared. Please check.",
      "range": {
        "startLine": 381,
        "startChar": 8,
        "endLine": 381,
        "endChar": 33
      },
      "revId": "f06a9037641e9168024576366f8e21867f81b558",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2d0c5ccb_77d3fb8e",
        "filename": "src/Thresholds.cpp",
        "patchSetId": 1
      },
      "lineNbr": 381,
      "author": {
        "id": 1000904
      },
      "writtenOn": "2021-04-30T00:53:49Z",
      "side": 1,
      "message": "I checked this concern on by:\n1. Tested a system with an adcsensor across critical low threshold, reboot and \u0027check ipmitool sensor list\u0027 in 100 loops, no issue found.\n2. Keep the 2 systems running ( not rebooting BMC) over night, one system has an adcsensor across critical low threshold; the other system\u0027s adc sensors are in normal state, no memory leak found .",
      "parentUuid": "8d9a8084_494eb6b4",
      "range": {
        "startLine": 381,
        "startChar": 8,
        "endLine": 381,
        "endChar": 33
      },
      "revId": "f06a9037641e9168024576366f8e21867f81b558",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}