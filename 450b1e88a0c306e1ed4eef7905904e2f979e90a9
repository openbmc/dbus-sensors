{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "d7fd51d2_bf477765",
        "filename": "src/FanMain.cpp",
        "patchSetId": 8
      },
      "lineNbr": 77,
      "author": {
        "id": 1000559
      },
      "writtenOn": "2023-04-07T21:34:03Z",
      "side": 1,
      "message": "change this to \nif (compatibleStream)\n{\n\n}\nelse\n{\n  return FanTypes::i2c;\n}",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 77,
        "endChar": 5
      },
      "revId": "450b1e88a0c306e1ed4eef7905904e2f979e90a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "307ce881_a841d2ef",
        "filename": "src/FanMain.cpp",
        "patchSetId": 8
      },
      "lineNbr": 77,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2023-04-10T20:14:34Z",
      "side": 1,
      "message": "The conditional here was inverted in response to Andrew J\u0027s comment @ line 73: https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62006/7..8/src/FanMain.cpp#b73\n\nShould I switch over to the above-suggested format instead?\n\nAlso worth noting- this section of code has another change (also suggested by Andrew @ https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62008/2..4/src/FanMain.cpp#b97 ) applied to it in a \u0027child\u0027 update that\u0027s also in review @ https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62008",
      "parentUuid": "d7fd51d2_bf477765",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 77,
        "endChar": 5
      },
      "revId": "450b1e88a0c306e1ed4eef7905904e2f979e90a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "9dd829c8_78de7369",
        "filename": "src/FanMain.cpp",
        "patchSetId": 8
      },
      "lineNbr": 77,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2023-04-10T21:02:08Z",
      "side": 1,
      "message": "Update: I\u0027ve separated out the code for the \u0027std::map\u0027 change and the addition of HPE-GXP fan handling into separate reviews.\n\nThe new review for the compatible-check-only changes are now here https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62011\n\nwhere \nhttps://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62008\nis being updated to *only* include the HPE-GXP fantype additions (and will be rebased on the above review soon)",
      "parentUuid": "307ce881_a841d2ef",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 77,
        "endChar": 5
      },
      "revId": "450b1e88a0c306e1ed4eef7905904e2f979e90a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "e496f5f1_31f3f7a0",
        "filename": "src/FanMain.cpp",
        "patchSetId": 8
      },
      "lineNbr": 77,
      "author": {
        "id": 1000559
      },
      "writtenOn": "2023-04-11T00:22:01Z",
      "side": 1,
      "message": "Reviewed new patch",
      "parentUuid": "9dd829c8_78de7369",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 77,
        "endChar": 5
      },
      "revId": "450b1e88a0c306e1ed4eef7905904e2f979e90a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "fcdbe05b_1387b8d1",
        "filename": "src/FanMain.cpp",
        "patchSetId": 8
      },
      "lineNbr": 77,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-04-11T10:52:36Z",
      "side": 1,
      "message": "I prefer early exits but I\u0027ll defer to Zhikui who is a much more active maintainer of dbus-sensors than I am.",
      "parentUuid": "e496f5f1_31f3f7a0",
      "range": {
        "startLine": 73,
        "startChar": 0,
        "endLine": 77,
        "endChar": 5
      },
      "revId": "450b1e88a0c306e1ed4eef7905904e2f979e90a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b4c8d3b8_c4b9dbb0",
        "filename": "src/FanMain.cpp",
        "patchSetId": 8
      },
      "lineNbr": 86,
      "author": {
        "id": 1000559
      },
      "writtenOn": "2023-04-07T21:34:03Z",
      "side": 1,
      "message": "should we just look for aspeed?",
      "range": {
        "startLine": 85,
        "startChar": 0,
        "endLine": 86,
        "endChar": 59
      },
      "revId": "450b1e88a0c306e1ed4eef7905904e2f979e90a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "56defd8b_7e9823f3",
        "filename": "src/FanMain.cpp",
        "patchSetId": 8
      },
      "lineNbr": 86,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2023-04-10T20:14:34Z",
      "side": 1,
      "message": "If no one has objections, I believe I could switch the check to key off the \"aspeed,\" prefix with little issue.",
      "parentUuid": "b4c8d3b8_c4b9dbb0",
      "range": {
        "startLine": 85,
        "startChar": 0,
        "endLine": 86,
        "endChar": 59
      },
      "revId": "450b1e88a0c306e1ed4eef7905904e2f979e90a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a3ff8cc9_f238583a",
        "filename": "src/FanMain.cpp",
        "patchSetId": 8
      },
      "lineNbr": 86,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2023-04-10T21:29:44Z",
      "side": 1,
      "message": "I\u0027m going to create a separate code review for using prefixes like \u0027aspeed,\u0027 and \u0027nuvoton,\u0027 on top of the std::map code @ https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62011\n\nthat way any comments can be made on that change alone. The new review will likely be online tomorrow once I\u0027ve had time to test that the prefix-only checks work as expected on a test machine.",
      "parentUuid": "56defd8b_7e9823f3",
      "range": {
        "startLine": 85,
        "startChar": 0,
        "endLine": 86,
        "endChar": 59
      },
      "revId": "450b1e88a0c306e1ed4eef7905904e2f979e90a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "52167737_c715119a",
        "filename": "src/FanMain.cpp",
        "patchSetId": 8
      },
      "lineNbr": 86,
      "author": {
        "id": 1000559
      },
      "writtenOn": "2023-04-11T00:22:01Z",
      "side": 1,
      "message": "Ack",
      "parentUuid": "a3ff8cc9_f238583a",
      "range": {
        "startLine": 85,
        "startChar": 0,
        "endLine": 86,
        "endChar": 59
      },
      "revId": "450b1e88a0c306e1ed4eef7905904e2f979e90a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "f924a3bd_674f2dd5",
        "filename": "src/FanMain.cpp",
        "patchSetId": 8
      },
      "lineNbr": 86,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-04-11T11:00:24Z",
      "side": 1,
      "message": "I (strongly?) prefer we be explicit about the actual devices we support here, i.e. match against exact compatible strings and not do hazy prefix matching. It makes the intent clear, and it\u0027s not hard to add new compatible strings.",
      "parentUuid": "52167737_c715119a",
      "range": {
        "startLine": 85,
        "startChar": 0,
        "endLine": 86,
        "endChar": 59
      },
      "revId": "450b1e88a0c306e1ed4eef7905904e2f979e90a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "645751f1_be6b90d5",
        "filename": "src/FanMain.cpp",
        "patchSetId": 8
      },
      "lineNbr": 90,
      "author": {
        "id": 1000559
      },
      "writtenOn": "2023-04-07T21:34:03Z",
      "side": 1,
      "message": "should we just look for nuvoton?",
      "range": {
        "startLine": 90,
        "startChar": 4,
        "endLine": 90,
        "endChar": 58
      },
      "revId": "450b1e88a0c306e1ed4eef7905904e2f979e90a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "35107cbd_34ea3262",
        "filename": "src/FanMain.cpp",
        "patchSetId": 8
      },
      "lineNbr": 90,
      "author": {
        "id": 1001354
      },
      "writtenOn": "2023-04-10T20:14:34Z",
      "side": 1,
      "message": "I was initially worried about doing something like this since there are non-fan nuvoton drivers that I assume could come up under /sys/class/hwmon/../compatible - but I think this bit of FanMain.cpp code @ line 273: https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62008/4/src/FanMain.cpp#273\n\n\u003efindFiles(fs::path(\"/sys/class/hwmon\"), R\"(fan\\d+_input)\", \n\nmeans that anything without the \u0027fan#_input\u0027 format won\u0027t be included in the results that get checked over.\n\nIf folks like the idea of this change, I can make it.",
      "parentUuid": "645751f1_be6b90d5",
      "range": {
        "startLine": 90,
        "startChar": 4,
        "endLine": 90,
        "endChar": 58
      },
      "revId": "450b1e88a0c306e1ed4eef7905904e2f979e90a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "b7d9bee0_98279eaa",
        "filename": "src/FanMain.cpp",
        "patchSetId": 8
      },
      "lineNbr": 90,
      "author": {
        "id": 1000559
      },
      "writtenOn": "2023-04-11T00:22:01Z",
      "side": 1,
      "message": "I am ok with the map change https://gerrit.openbmc.org/c/openbmc/dbus-sensors/+/62008/2..4/src/FanMain.cpp#66",
      "parentUuid": "35107cbd_34ea3262",
      "range": {
        "startLine": 90,
        "startChar": 4,
        "endLine": 90,
        "endChar": 58
      },
      "revId": "450b1e88a0c306e1ed4eef7905904e2f979e90a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7ea509fd_0c387996",
        "filename": "src/FanMain.cpp",
        "patchSetId": 8
      },
      "lineNbr": 90,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2023-04-11T11:00:24Z",
      "side": 1,
      "message": "\u003e should we just look for nuvoton\n\nSee my reply above.",
      "parentUuid": "b7d9bee0_98279eaa",
      "range": {
        "startLine": 90,
        "startChar": 4,
        "endLine": 90,
        "endChar": 58
      },
      "revId": "450b1e88a0c306e1ed4eef7905904e2f979e90a9",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}