{
  "comments": [
    {
      "key": {
        "uuid": "34220b9e_e0f1620e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 26,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-01-22T22:38:19Z",
      "side": 1,
      "message": "all this looks like it\u0027s wrapped on 50 character spacing?  Can you reformat it to match the 50/72 spacing we normally use?",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 26,
        "endChar": 0
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "94f5d2fa_59a00ce1",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 26,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2021-01-24T05:41:55Z",
      "side": 1,
      "message": "Done.",
      "parentUuid": "34220b9e_e0f1620e",
      "range": {
        "startLine": 8,
        "startChar": 0,
        "endLine": 26,
        "endChar": 0
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "2c931ffc_6308b10b",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 27,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-01-22T22:38:19Z",
      "side": 1,
      "message": "Can you be a little more concrete than this?  I\u0027d love to just trust you that \"it works\" but everyones definition of \"works\" seems to be different ðŸ˜Š",
      "range": {
        "startLine": 27,
        "startChar": 8,
        "endLine": 27,
        "endChar": 47
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "8548ffca_f4ad6efb",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 27,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2021-01-24T05:41:55Z",
      "side": 1,
      "message": "Done. I elaborated on it.",
      "parentUuid": "2c931ffc_6308b10b",
      "range": {
        "startLine": 27,
        "startChar": 8,
        "endLine": 27,
        "endChar": 47
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "f8d539ca_a6e93235",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 32,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-01-22T22:38:19Z",
      "side": 1,
      "message": "Can you take the word \"zone\" out of this?  Zones are a different thing than a sensor, and might include multiple sensors.",
      "range": {
        "startLine": 32,
        "startChar": 22,
        "endLine": 32,
        "endChar": 26
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "5731af50_4f3f5ebe",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 32,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2021-01-24T05:41:55Z",
      "side": 1,
      "message": "Definitely. It was a misleading name.",
      "parentUuid": "f8d539ca_a6e93235",
      "range": {
        "startLine": 32,
        "startChar": 22,
        "endLine": 32,
        "endChar": 26
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ea7627d6_bd2853bc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 33,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-01-22T22:38:19Z",
      "side": 1,
      "message": "Can we call this \"type\" or \"units\" and have it match the enumeration here:\nhttps://github.com/openbmc/phosphor-dbus-interfaces/blob/6f8ebc58ebe13e97522a7d1740690dde1adadaa8/xyz/openbmc_project/Sensor/Value.interface.yaml#L51\n\nI realize this is just going off the path version, and that\u0027s fine, but I think the Units field (and subsequent naming) makes it a lot more clear what it does, and how it relates to the dbus output, whereas users shouldn\u0027t really be using path at all.",
      "range": {
        "startLine": 33,
        "startChar": 3,
        "endLine": 33,
        "endChar": 10
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "54147b49_a21d06c5",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 33,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2021-01-24T05:41:55Z",
      "side": 1,
      "message": "Sorry, I intentionally thought about both of these during development, but excluded both.\n\nReason is, the word \"Type\" is already massively overloaded, and I didn\u0027t want to add yet another meaning to it.\n\nAlso, the word \"Units\" to me means the units of measurement such as volts, amps, degrees C, and so on. There is also a well-known meaning of \"Units\" within IPMI, and I don\u0027t want to cause confusion with that.\n\nI intentionally want to use \"Measure\" to specify what physical property is being measured, such as \"temperature\" in this case, and it corresponds 1:1 to the path name component in the D-Bus object path. This adjective isn\u0027t used anywhere yet, so it is a good choice for a newly added field.",
      "parentUuid": "ea7627d6_bd2853bc",
      "range": {
        "startLine": 33,
        "startChar": 3,
        "endLine": 33,
        "endChar": 10
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "d23a6e37_6d6202a3",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 33,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-01-25T15:59:45Z",
      "side": 1,
      "message": "\u003e Sorry, I intentionally thought about both of these during development, but excluded both.\n\u003e \n\u003e Reason is, the word \"Type\" is already massively overloaded, and I didn\u0027t want to add yet another meaning to it.\n\nAgreed, type is a bad thing to pick.\n\n\u003e \n\u003e Also, the word \"Units\" to me means the units of measurement such as volts, amps, degrees C, and so on. There is also a well-known meaning of \"Units\" within IPMI, and I don\u0027t want to cause confusion with that.\n\nYes, that\u0027s what I\u0027d like this field to represent, not the actual path, as we can point to the enum in phosphor-dbus-interfaces for documentation.\n\n\"Units\": \"DegreesC\"\n\nI think is a lot more clear, and can point to PDI for documentation.\n\n\"Measure\": \"temperature\"\nDoesn\u0027t have an equivalent doc we can point to, and is a lot less obvious what values are allowed, or why it\u0027s required.\n\nConsidering this file is supposed to contain zero IPMI data, it seems less likely that people would have any confusion about IPMI, but even if they do, IPMI is still a superset mapping of a \"units\" parameter, so it seems reasonable.\n\n\u003e \n\u003e I intentionally want to use \"Measure\" to specify what physical property is being measured, such as \"temperature\" in this case, and it corresponds 1:1 to the path name component in the D-Bus object path. This adjective isn\u0027t used anywhere yet, so it is a good choice for a newly added field.\n\n\"Measure\" isn\u0027t really a great descriptor either.",
      "parentUuid": "54147b49_a21d06c5",
      "range": {
        "startLine": 33,
        "startChar": 3,
        "endLine": 33,
        "endChar": 10
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "ab13d830_0cc7170f",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 33,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2021-01-26T09:04:48Z",
      "side": 1,
      "message": "You have a good point. However, it seems beyond the scope of this change, and unnecessary, to introduce an additional mapping layer that just would serve to add a further layer of obfuscation. I like having it correspond 1:1 with the D-Bus object path, as then it makes logical sense what it is referring to. Also, not all sensors correspond cleanly to units: fan PWM is unitless, for example.",
      "parentUuid": "d23a6e37_6d6202a3",
      "range": {
        "startLine": 33,
        "startChar": 3,
        "endLine": 33,
        "endChar": 10
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "8c456ce3_69c68ddc",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 33,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-01-28T23:55:54Z",
      "side": 1,
      "message": "I\u0027m really not following how this is beyond the scope of the change, considering it\u0027s a change to the daemon you\u0027re building from scratch, and the config definition is being added.\n\nYou already have a mapping layer to some extent, looking up valid paths, now it just needs to map valid paths and units.  If you want me to write that code, I can.\n\nThe biggest reason I ask for this is there has been talk previously about deprecating the \"path is equal to units\" thing, and solely relying on units, and considering the config files are very long lived, I\u0027d like to avoid that issue in this case.  Also, at some point, we\u0027ll actually use units properly, and we\u0027ll need a lookup table either way, I\u0027d much rather the config file be Units-\u003epath than path-\u003eunits, just for sanity in documentation.",
      "parentUuid": "ab13d830_0cc7170f",
      "range": {
        "startLine": 33,
        "startChar": 3,
        "endLine": 33,
        "endChar": 10
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "e9c3a2d4_62c715ee",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 33,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2021-01-29T06:01:15Z",
      "side": 1,
      "message": "It is beyond the scope of ExternalSensor because all ExternalSensor needs to know, in order to function, is the correct name for the second-to-final path component. There\u0027s currently no way to define that, as \"Name\" is only for the final path component (the basename), not the second-to-final path component. ExternalSensor needs both, in order to compose the full path string that will be used. So, I added \"Measure\", to provide this missing piece of knowledge.\n\nAdding another feature, to get the content of \"Measure\" indirectly somehow, perhaps from a mapping table contained elsewhere, is another layer of indirection that isn\u0027t required for ExternalSensor to function. In my opinion, it just adds a layer of obfuscation. However, if you truly believe it is needed, then yes, I would like you to write it. That will save a lot of back-and-forth trying to come up with an acceptable table of \"unit names\" to second-to-final path components.",
      "parentUuid": "8c456ce3_69c68ddc",
      "range": {
        "startLine": 33,
        "startChar": 3,
        "endLine": 33,
        "endChar": 10
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "be4b854f_fcbb3323",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 33,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-01-29T06:10:21Z",
      "side": 1,
      "message": "\u003e It is beyond the scope of ExternalSensor because all ExternalSensor needs to know, in order to function, is the correct name for the second-to-final path component. There\u0027s currently no way to define that, as \"Name\" is only for the final path component (the basename), not the second-to-final path component. \n\nUnits has a 1:1 relationship with the second to final path component, so that is how you should define it.  I\u0027m in no way suggesting you use Name to determine the units, or the second to last path.\n\n\u003e ExternalSensor needs both, in order to compose the full path string that will be used. So, I added \"Measure\", to provide this missing piece of knowledge.\n\nAgain....  Replacing with Units would be much more clear, and would just as easily convey that knowledge.\n\n\u003e \n\u003e Adding another feature, to get the content of \"Measure\" indirectly somehow, perhaps from a mapping table contained elsewhere, is another layer of indirection that isn\u0027t required for ExternalSensor to function.\n\nIt doesn\u0027t have to get the mapping from anywhere, you just have to change your lookup table of legal values to a lookup table of legal units to path conversions.\n\n\u003e In my opinion, it just adds a layer of obfuscation.\n\nHow so?  The config files are meant to model the system itself, and its external interfaces, not necessarily the internal structure.  IPMI and redfish expose \"units\" they do not expose the second to last dbus path.\n\n\u003e However, if you truly believe it is needed, then yes, I would like you to write it. That will save a lot of back-and-forth trying to come up with an acceptable table of \"unit names\" to second-to-final path components.\n\nHappy to.  BTW, the acceptable table of unit names to second-to-final-path components is documented in the sensor value interface in dbus-interfaces already, no need to argue about what the list should be (at least in the context of this patchset).",
      "parentUuid": "e9c3a2d4_62c715ee",
      "range": {
        "startLine": 33,
        "startChar": 3,
        "endLine": 33,
        "endChar": 10
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "52bc26ef_02cb5417",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 33,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-01-29T18:28:02Z",
      "side": 1,
      "message": "Done.  Let me know if that still works for you.",
      "parentUuid": "be4b854f_fcbb3323",
      "range": {
        "startLine": 33,
        "startChar": 3,
        "endLine": 33,
        "endChar": 10
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "9cc7d88f_f8b25a46",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 33,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2021-01-29T20:53:01Z",
      "side": 1,
      "message": "Yes, it still works. Thanks for more explanation. What file contains the existing table? SensorMeasures.hpp (maybe this file should be renamed to SensorUnits) would be the best place to add this table lookup at.",
      "parentUuid": "52bc26ef_02cb5417",
      "range": {
        "startLine": 33,
        "startChar": 3,
        "endLine": 33,
        "endChar": 10
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "df886286_6a8fd662",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 33,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-01-29T20:59:04Z",
      "side": 1,
      "message": "You must\u0027ve read my mind, because I already did that, well, kinda, I called it SensorPaths.hpp, because it was more than just units;  Check out the current patchset.\n\nThere\u0027s a pointer to the file in a comment in the newest patchset.  It\u0027s not a file that dbus-sensors owns.",
      "parentUuid": "9cc7d88f_f8b25a46",
      "range": {
        "startLine": 33,
        "startChar": 3,
        "endLine": 33,
        "endChar": 10
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "d5016309_e0c12f94",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 37,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-01-22T22:38:19Z",
      "side": 1,
      "message": "I wonder if we should start checking these kinds of things into an examples folder.  Food for thought, not required for this patchset though.",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 37,
        "endChar": 2
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "2c282587_e0281e6a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 37,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2021-01-24T05:41:55Z",
      "side": 1,
      "message": "That would be a good idea, for another change. We really need more documentation and examples for people to follow, as the initial learning curve is sharp.",
      "parentUuid": "d5016309_e0c12f94",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 37,
        "endChar": 2
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "68d8f125_74747218",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 37,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-01-25T15:59:45Z",
      "side": 1,
      "message": "And not everyone upstreams their systems config file ðŸ˜Š\n\nThe hope was that there\u0027d be a least one representation of each type of config within the systems, but that turned out to not really work out.",
      "parentUuid": "2c282587_e0281e6a",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 37,
        "endChar": 2
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    },
    {
      "key": {
        "uuid": "179f8fcd_b7ba873d",
        "filename": "/COMMIT_MSG",
        "patchSetId": 15
      },
      "lineNbr": 37,
      "author": {
        "id": 1000520
      },
      "writtenOn": "2021-01-26T09:04:48Z",
      "side": 1,
      "message": "Agreed. At least, by putting an example in the change description text of this change, it becomes searchable, so somebody interested can find it in the future. It would be a good idea, for a future change, to collate these examples into another documentation file that can be added to the source somewhere.",
      "parentUuid": "68d8f125_74747218",
      "range": {
        "startLine": 31,
        "startChar": 0,
        "endLine": 37,
        "endChar": 2
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "a8f7d65b_cab85c3c",
        "filename": "include/SensorMeasures.hpp",
        "patchSetId": 15
      },
      "lineNbr": 19,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2021-01-22T22:38:19Z",
      "side": 1,
      "message": "Now that this is in a function, can we just make this an array of const char* and do a linear search on it?  Constructing the unordered_set as well as all the strings is likely far more expensive than just doing a quick loop through values that are close to one another in RODATA.",
      "range": {
        "startLine": 19,
        "startChar": 10,
        "endLine": 19,
        "endChar": 41
      },
      "revId": "8e7b84b6458013c595c36b6fa43a039a5d51e4eb",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4",
      "unresolved": true
    }
  ]
}