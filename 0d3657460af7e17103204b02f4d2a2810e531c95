{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "178ebd88_cf35e747",
        "filename": "src/adc/ADCSensorMain.cpp",
        "patchSetId": 10
      },
      "lineNbr": 313,
      "author": {
        "id": 1002504
      },
      "writtenOn": "2025-12-14T22:38:37Z",
      "side": 1,
      "message": "is there really a need for a malloc here?",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3ea22b39_ac04f29f",
        "filename": "src/adc/ADCSensorMain.cpp",
        "patchSetId": 10
      },
      "lineNbr": 313,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-12-15T17:52:24Z",
      "side": 1,
      "message": "There was in one variation of this patch, but yes, this isn\u0027t needed now that getConfiguration has been ported to take string_view.\n\nFixed",
      "parentUuid": "178ebd88_cf35e747",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "de3fa37c_33ec2caa",
        "filename": "src/external/ExternalSensorMain.cpp",
        "patchSetId": 10
      },
      "lineNbr": 322,
      "author": {
        "id": 1002504
      },
      "writtenOn": "2025-12-14T22:38:37Z",
      "side": 1,
      "message": "same here. If a vector is required here, can we update it to take a range or iterators or span?",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0dc7db43_03e42531",
        "filename": "src/external/ExternalSensorMain.cpp",
        "patchSetId": 10
      },
      "lineNbr": 322,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-12-15T17:52:24Z",
      "side": 1,
      "message": "This is different, but I\u0027ve moved this to be constexpr std::array.  getConfiguration (as of the patch a few days ago) now supports span of string_view.\n\nFixed",
      "parentUuid": "de3fa37c_33ec2caa",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a4ddca6a_bb8ff75c",
        "filename": "src/external/ExternalSensorMain.cpp",
        "patchSetId": 10
      },
      "lineNbr": 323,
      "author": {
        "id": 1002504
      },
      "writtenOn": "2025-12-14T22:38:37Z",
      "side": 1,
      "message": "This seems like a bug. Why are emplacing this when we\u0027ve already constructed it with the same thing.",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "318f1f78_1a131a5b",
        "filename": "src/external/ExternalSensorMain.cpp",
        "patchSetId": 10
      },
      "lineNbr": 323,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-12-15T17:52:24Z",
      "side": 1,
      "message": "Yes.... this is a bug.  Fixed.",
      "parentUuid": "a4ddca6a_bb8ff75c",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b5a4de94_b8aae38f",
        "filename": "src/hwmon-temp/HwmonTempMain.cpp",
        "patchSetId": 10
      },
      "lineNbr": 549,
      "author": {
        "id": 1002504
      },
      "writtenOn": "2025-12-14T22:38:37Z",
      "side": 1,
      "message": "same here, why can\u0027t we do this at constexpr?",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c8d7ce03_536947ba",
        "filename": "src/hwmon-temp/HwmonTempMain.cpp",
        "patchSetId": 10
      },
      "lineNbr": 549,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-12-15T17:52:24Z",
      "side": 1,
      "message": "Two answers to \"why not\"\n1. We don\u0027t on master today, so I made the most surgical change here I could.\n2. I don\u0027t know of a way to convert a std::array\u003cstd::pair\u003c...\u003e\u003e into an array of string view at compile time (although it might be possible now that we have constexpr vector in c++23)\n\nIf you do, please give me a code snippet, and I can do that.",
      "parentUuid": "b5a4de94_b8aae38f",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0820e2d9_4d459a9e",
        "filename": "src/hwmon-temp/HwmonTempMain.cpp",
        "patchSetId": 10
      },
      "lineNbr": 549,
      "author": {
        "id": 1002504
      },
      "writtenOn": "2025-12-15T18:10:56Z",
      "side": 1,
      "message": "https://godbolt.org/z/aEP3TaYb5\n\nthis seems to roughly do it with index_sequences.",
      "parentUuid": "c8d7ce03_536947ba",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2e74f777_306d88a3",
        "filename": "src/hwmon-temp/HwmonTempMain.cpp",
        "patchSetId": 10
      },
      "lineNbr": 549,
      "author": {
        "id": 1002504
      },
      "writtenOn": "2025-12-15T18:12:25Z",
      "side": 1,
      "message": "follow on is fine, also this is relatively advanced template-fu. If we think that readability is preferred, I won\u0027t die on this hill.",
      "parentUuid": "0820e2d9_4d459a9e",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8a8e76c0_f6f74075",
        "filename": "src/hwmon-temp/HwmonTempMain.cpp",
        "patchSetId": 10
      },
      "lineNbr": 549,
      "author": {
        "id": 1002504
      },
      "writtenOn": "2025-12-15T18:13:50Z",
      "side": 1,
      "message": "This also requires the compiler to generate N template instantiations of extractFirstImpl afaict, maybe we don\u0027t care about that, since its in a cpp file, but its the sort of thing that leads to compile time bloat.",
      "parentUuid": "2e74f777_306d88a3",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "15b7e0b4_09b2c781",
        "filename": "src/hwmon-temp/HwmonTempMain.cpp",
        "patchSetId": 10
      },
      "lineNbr": 549,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-12-15T18:53:56Z",
      "side": 1,
      "message": "\u003e this is relatively advanced template-fu\n\nExactly.  For code that\u0027s a single malloc of a small data structure done only at configure time, and not in the hot loop, I have a strong preference for what\u0027s here given it\u0027s simpler to read and reason about.  I do suspect that you could do this in a consteval method and keep it both simple and constexpr, but that\u0027s a follow on.\n\nIf this were in a hot loop and we should show that mallocs were causing performance issues, I\u0027d be all for template-fu.",
      "parentUuid": "8a8e76c0_f6f74075",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "2b8fd757_6e59d06d",
        "filename": "src/hwmon-temp/HwmonTempMain.cpp",
        "patchSetId": 10
      },
      "lineNbr": 549,
      "author": {
        "id": 1002504
      },
      "writtenOn": "2025-12-15T19:02:01Z",
      "side": 1,
      "message": "hah, you can just do this with a normal consteval function...\n\nhttps://godbolt.org/z/YorfMqTzq\n\n```\ntemplate \u003ctypename T, std::size_t N\u003e\nconsteval auto extractKeys(\n    const std::array\u003cstd::pair\u003cstd::string_view, T\u003e, N\u003e\u0026 arr)\n{\n    std::array\u003cstd::string_view, N\u003e ret;\n    for (int ctr \u003d 0; ctr \u003c N; ++ctr)\n    {\n        ret[ctr] \u003d arr[ctr].first;\n    }\n    return ret;\n}\n```",
      "parentUuid": "15b7e0b4_09b2c781",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "9bfad29b_326beeed",
        "filename": "src/hwmon-temp/HwmonTempMain.cpp",
        "patchSetId": 10
      },
      "lineNbr": 549,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-12-15T20:14:10Z",
      "side": 1,
      "message": "Yep, that\u0027s about what I\u0027d expect.  Can follow on with another patch to propose that (unless you want to push it)",
      "parentUuid": "2b8fd757_6e59d06d",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "519d2937_3264250d",
        "filename": "src/intrusion/IntrusionSensorMain.cpp",
        "patchSetId": 10
      },
      "lineNbr": 277,
      "author": {
        "id": 1002504
      },
      "writtenOn": "2025-12-14T22:38:37Z",
      "side": 1,
      "message": "same here, this seems to be known at compile time?",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "475c47b7_9e5388f5",
        "filename": "src/intrusion/IntrusionSensorMain.cpp",
        "patchSetId": 10
      },
      "lineNbr": 277,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2026-02-10T04:17:15Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "519d2937_3264250d",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "089e9492_31427251",
        "filename": "src/sensor.hpp",
        "patchSetId": 10
      },
      "lineNbr": 281,
      "author": {
        "id": 1002504
      },
      "writtenOn": "2025-12-14T22:38:37Z",
      "side": 1,
      "message": "not really related to this review, but we should probably handle stuff like this in the register_property function, not at the call site. If the function needs a certain lifetime for its parameters, it should enforce it, IMO.",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0d8b770b_e5e0b304",
        "filename": "src/sensor.hpp",
        "patchSetId": 10
      },
      "lineNbr": 281,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2026-02-10T04:17:15Z",
      "side": 1,
      "message": "register_property is in sdbusplus. We could maybe handle this, but std::string_view is a weird case, because the value is functionally const.  All the other properties assume that the property could be read/write, even if we don\u0027t register the handler.\n\nCould be fixed.",
      "parentUuid": "089e9492_31427251",
      "revId": "0d3657460af7e17103204b02f4d2a2810e531c95",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}