{
  "comments": [
    {
      "unresolved": false,
      "key": {
        "uuid": "94d4e919_915a8c55",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 22
      },
      "lineNbr": 0,
      "author": {
        "id": 1000926
      },
      "writtenOn": "2025-05-12T21:54:17Z",
      "side": 1,
      "message": "Can I ask couple of questions regarding IPMI SEL?\n\n1. How will these log messages be interperted in the `ipmitool sel log` output? Will they be mapped to the correct sensorIDs? (If this is the case, does it work only in dynamic IPMI compilation option, or is there any way to get it working with YAML approach? Does it work with the base code of ipmid, or is fb-ipmi-oem necessary to be present)\n\n2. What will be with the systems that currently use sel-logger for threshold logging? Will they get duplicates for every threshold event SEL after this change?",
      "revId": "ee113ec1d44cce4ef8fe7a5bc76007a4790bd01a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "c2bc0b92_8ce01376",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 22
      },
      "lineNbr": 0,
      "author": {
        "id": 1000212
      },
      "writtenOn": "2025-06-11T18:13:22Z",
      "side": 1,
      "message": "(1) These are primarily for redfish side of things. Someone more familiar with IPMI SEL entries should update https://github.com/openbmc/phosphor-host-ipmid/blob/master/selutility.cpp#L292.\n (2) Yes. If a platform is using phosphor-sel-logger with log-threshold option enabled, they will get duplicate logs. There are two options here:\n   (a) Disable it (Now that I have put up https://gerrit.openbmc.org/c/openbmc/phosphor-virtual-sensor/+/80773 (virtual sensors) and https://gerrit.openbmc.org/c/openbmc/pldm/+/77525 (pldm), it should not be needed anymore once all 3 gets merged (Some platforms might not use pldm or virtual sensors or both so it should not matter for those platforms)\n   (b) Disable these, by adding filters: https://github.com/openbmc/phosphor-logging?tab\u003dreadme-ov-file#event-log-filtering to phosphor-logging. I could propose these filters if it helps.",
      "parentUuid": "94d4e919_915a8c55",
      "revId": "ee113ec1d44cce4ef8fe7a5bc76007a4790bd01a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "1000427c_f4fa4d2e",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 22
      },
      "lineNbr": 0,
      "author": {
        "id": 1001198
      },
      "writtenOn": "2025-06-16T03:28:04Z",
      "side": 1,
      "message": "Hi @amithash@meta.com,\nCurrently, when dbus-sensors emits threshold event signal, the phosphor-sel-logger will create 2 journal logs for IPMI and Redfish.\nIf we disable log-threshold option in phosphor-sel-logger, no IPMI journal logs are created.\nI think we have to add the code to add IPMI journal log in the Dbus-sensors also.",
      "parentUuid": "c2bc0b92_8ce01376",
      "revId": "ee113ec1d44cce4ef8fe7a5bc76007a4790bd01a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "3039e0eb_56be9be7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 22
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-06-19T21:33:26Z",
      "side": 1,
      "message": "What is the \"IPMI journal log\"?  We shouldn\u0027t be adding IPMI-specific code in dbus-sensors.  If there is functionality missing, I suspect we need something in either:\n- phosphor-logging (less likely)\n- ipmi itself\n- rsyslog magic\n\nThere is already an option in phosphor-logging to enable journal if that\u0027s something you want: https://github.com/openbmc/phosphor-logging/blob/master/lib/lg2_commit.cpp#L132 .  This is the thing that might need some ipmi and/or rsyslog machinery to fully enable.\n\n\u003e Currently, when dbus-sensors emits threshold event signal, the phosphor-sel-logger will create 2 journal logs for IPMI and Redfish.\n\nUsing new-style events is an overall direction.  I\u0027m fine if we point out what needs to be fixed and get it fixed, but we shouldn\u0027t hold up a dbus-sensors commit for a missing IPMI functionality.  We already have these events in other repositories.",
      "parentUuid": "1000427c_f4fa4d2e",
      "revId": "ee113ec1d44cce4ef8fe7a5bc76007a4790bd01a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "de4b654a_bdc31c24",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 22
      },
      "lineNbr": 0,
      "author": {
        "id": 1001198
      },
      "writtenOn": "2025-07-03T07:43:46Z",
      "side": 1,
      "message": "I investigated the method applications are logging threshold events (dbus-sensors/phosphor-virtual-sensors/pldm. I see that they are emitting signals to phosphor-sel-logger to notify events. phosphor-sel-logger reads messages to create logs for both IPMI and Redfish.\nI see that you are updating the method to log threshold events in dbus-sensors/phosphor-virtual-sensors/pldm, should we update phosphor-sel-logger instead?",
      "parentUuid": "3039e0eb_56be9be7",
      "revId": "ee113ec1d44cce4ef8fe7a5bc76007a4790bd01a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "8f15a2a8_46306a4f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 22
      },
      "lineNbr": 0,
      "author": {
        "id": 1000000
      },
      "writtenOn": "2025-07-03T15:32:48Z",
      "side": 1,
      "message": "\u003e I see that you are updating the method to log threshold events in dbus-sensors/phosphor-virtual-sensors/pldm, should we update phosphor-sel-logger instead?\n\nNo.  phosphor-sel-logger is an optional component.  We should not rely on this for mainline behavior, such as reporting threshold events.\n\nIn my opinion, this was a poor implementation decision originally.",
      "parentUuid": "de4b654a_bdc31c24",
      "revId": "ee113ec1d44cce4ef8fe7a5bc76007a4790bd01a",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}