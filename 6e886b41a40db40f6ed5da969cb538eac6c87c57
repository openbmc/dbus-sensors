{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "fbd35f0e_51cfe00c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-25T00:09:22Z",
      "side": 1,
      "message": "Why not only build the tests for the allowed daemons?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 47
      },
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "08a47a66_f40663da",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-26T17:07:34Z",
      "side": 1,
      "message": "Not all features/daemons are enabled by default, so if we did that we\u0027d need a solution for CI to build everything.  Additionally, if unit tests are a unit, there shouldn\u0027t be any downside to running them (except compile times for a build-all build).",
      "parentUuid": "fbd35f0e_51cfe00c",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 47
      },
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "41138bf2_3e8109ef",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-12-02T17:59:41Z",
      "side": 1,
      "message": "if there\u0027s a better option here, I\u0027m open to it, I just don\u0027t see what it is.",
      "parentUuid": "08a47a66_f40663da",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 47
      },
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "628398e4_de42021a",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-12-02T23:01:00Z",
      "side": 1,
      "message": "\u003e Not all features/daemons are enabled by default\n\nWhy not though? What\u0027s the concern?\n\nI think having the set of tests built be consistent with the set of daemons enabled is a fairly reasonable philosophy and shouldn\u0027t be difficult to implement.",
      "parentUuid": "41138bf2_3e8109ef",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 47
      },
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2f89087f_236f61a8",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-12-03T21:37:08Z",
      "side": 1,
      "message": "\u003e \u003e Not all features/daemons are enabled by default\n\u003e \n\u003e Why not though? What\u0027s the concern?\n\nI should clarify, they\u0027re not all enabled at a yocto level, so this is mostly moot in this context.\n\n\u003e \n\u003e I think having the set of tests built be consistent with the set of daemons enabled is a fairly reasonable philosophy and shouldn\u0027t be difficult to implement.\n\nThat\u0027s something we could discuss, but that\u0027s not what\u0027s implemented today.  I\u0027m not sure I agree with you at this stage (given the unit tests are pretty fast to both build and run) but I could certainly see a case where we need that some day if the unit tests get too lengthy to build.  If it\u0027s ok, I\u0027d like to see that as a separate initiative (ideally done by someone that wants to see that happen, maybe that\u0027s you?).  I\u0027m not sure I could properly defend it today.\n\nhttps://github.com/openbmc/dbus-sensors/blob/master/src/tests/meson.build\n\nEverything in the test repo is currently enabled unconditionally.",
      "parentUuid": "628398e4_de42021a",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 47
      },
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "5ea86e95_adbc1166",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2025-12-05T03:14:18Z",
      "side": 1,
      "message": "I think we can handle enabling the tests based on feature as a followup patch and reduce the scope of this patch to just moving the meson option check into subfolders (by updating patch comment description to reflect so).",
      "parentUuid": "2f89087f_236f61a8",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 47
      },
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ac719ab6_6ddda716",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-12-09T17:46:34Z",
      "side": 1,
      "message": "@andrew@codeconstruct.com.au you good with that, or do you want to keep this patch in review until this is addressed?",
      "parentUuid": "5ea86e95_adbc1166",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 47
      },
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6fe03aeb_1ab156e7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-12-15T02:19:10Z",
      "side": 1,
      "message": "Switching to feature-based tests in a follow-up is fine.",
      "parentUuid": "ac719ab6_6ddda716",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 47
      },
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ae1a8721_53280464",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-11-24T22:50:10Z",
      "side": 1,
      "message": "\u003e not recursiving into\nthe subdirectory prevents compilation if both unit tests are enabled and\nthe feature is disabled.\n\nI don\u0027t think so, recursing into a subdirectory is not required for meson to use the files therein.\n\n```\ntest(\n    \u0027MCTPEndpoint\u0027,\n    executable(\n        \u0027test_MCTPEndpoint\u0027,\n        \u0027test_MCTPEndpoint.cpp\u0027,\n        \u0027../mctp/MCTPEndpoint.cpp\u0027,\n        dependencies: [gmock_dep, ut_deps_list, utils_dep],\n        implicit_include_directories: false,\n        include_directories: \u0027../mctp\u0027,\n    ),  \n)\n```\n\nmctp test is defined like above, and even with\n```\n\n  User defined options\n    mctp                    : disabled\n    nvidia-gpu              : enabled\n    nvme                    : disabled\n```\n\nthe mctp tests can build\n\n```\nmeson test\nninja: Entering directory `/home/alexander/upstreaming/dbus-sensors/build\u0027\nninja: no work to do.\n1/5 test_utils          OK              0.04s\n2/5 test_ipmb           OK              0.03s\n3/5 MCTPReactor         OK              0.02s\n4/5 MCTPEndpoint        OK              0.02s\n5/5 NvidiaGPU           OK              0.01s\n\nOk:                5   \nFail:              0   \n```",
      "range": {
        "startLine": 9,
        "startChar": 49,
        "endLine": 11,
        "endChar": 24
      },
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ddad50a_c090d3c7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-24T23:06:47Z",
      "side": 1,
      "message": "Correct, it\u0027s not required to use the files, but it is required to use any dependencies or variables within, which could be reused.",
      "parentUuid": "ae1a8721_53280464",
      "range": {
        "startLine": 9,
        "startChar": 49,
        "endLine": 11,
        "endChar": 24
      },
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "46903636_5b77df84",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-11-25T09:50:16Z",
      "side": 1,
      "message": "If that\u0027s the actual reason, it makes more sense to me now. Thanks for explaining.",
      "parentUuid": "4ddad50a_c090d3c7",
      "range": {
        "startLine": 9,
        "startChar": 49,
        "endLine": 11,
        "endChar": 24
      },
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b26f9bb2_dcc7c4e9",
        "filename": "src/tests/meson.build",
        "patchSetId": 3
      },
      "lineNbr": 2,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-11-24T22:50:10Z",
      "side": 1,
      "message": "We can use `subdir_done()` to avoid all the extra indentation.\n\nhttps://mesonbuild.com/Reference-manual_functions.html#subdir_done\n\nsomething like\n\n```\nif not get_option(\u0027tests\u0027).allowed()\n  subdir_done()\nendif\n```\n\nIf it works for you we could apply throughout the patch.",
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "60cde392_ae7daa3c",
        "filename": "src/tests/meson.build",
        "patchSetId": 3
      },
      "lineNbr": 2,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-24T23:06:47Z",
      "side": 1,
      "message": "I wasn\u0027t aware of that method.  Seems reasonable, I\u0027m not sure i\u0027ll have time to make that patch soon, but I can try.  Can you try 1 quick example from this patch and see if subdir_done() solves this in a way that\u0027s acceptable to you?",
      "parentUuid": "b26f9bb2_dcc7c4e9",
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "baa95db8_0c0cf268",
        "filename": "src/tests/meson.build",
        "patchSetId": 3
      },
      "lineNbr": 2,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-11-25T09:50:16Z",
      "side": 1,
      "message": "I tried with `mctp` and `nvidia-gpu` and for both cases it works and results in less diff and indentation.",
      "parentUuid": "60cde392_ae7daa3c",
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0fceac27_95351f85",
        "filename": "src/tests/meson.build",
        "patchSetId": 3
      },
      "lineNbr": 2,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-26T17:07:34Z",
      "side": 1,
      "message": "ACK, will implement when I get a moment.",
      "parentUuid": "baa95db8_0c0cf268",
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "89b1295a_d52c22df",
        "filename": "src/tests/meson.build",
        "patchSetId": 3
      },
      "lineNbr": 2,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-26T21:25:45Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "0fceac27_95351f85",
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}