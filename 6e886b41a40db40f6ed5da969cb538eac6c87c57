{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "fbd35f0e_51cfe00c",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1000009
      },
      "writtenOn": "2025-11-25T00:09:22Z",
      "side": 1,
      "message": "Why not only build the tests for the allowed daemons?",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 47
      },
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "08a47a66_f40663da",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 9,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-26T17:07:34Z",
      "side": 1,
      "message": "Not all features/daemons are enabled by default, so if we did that we\u0027d need a solution for CI to build everything.  Additionally, if unit tests are a unit, there shouldn\u0027t be any downside to running them (except compile times for a build-all build).",
      "parentUuid": "fbd35f0e_51cfe00c",
      "range": {
        "startLine": 9,
        "startChar": 0,
        "endLine": 9,
        "endChar": 47
      },
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "ae1a8721_53280464",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-11-24T22:50:10Z",
      "side": 1,
      "message": "\u003e not recursiving into\nthe subdirectory prevents compilation if both unit tests are enabled and\nthe feature is disabled.\n\nI don\u0027t think so, recursing into a subdirectory is not required for meson to use the files therein.\n\n```\ntest(\n    \u0027MCTPEndpoint\u0027,\n    executable(\n        \u0027test_MCTPEndpoint\u0027,\n        \u0027test_MCTPEndpoint.cpp\u0027,\n        \u0027../mctp/MCTPEndpoint.cpp\u0027,\n        dependencies: [gmock_dep, ut_deps_list, utils_dep],\n        implicit_include_directories: false,\n        include_directories: \u0027../mctp\u0027,\n    ),  \n)\n```\n\nmctp test is defined like above, and even with\n```\n\n  User defined options\n    mctp                    : disabled\n    nvidia-gpu              : enabled\n    nvme                    : disabled\n```\n\nthe mctp tests can build\n\n```\nmeson test\nninja: Entering directory `/home/alexander/upstreaming/dbus-sensors/build\u0027\nninja: no work to do.\n1/5 test_utils          OK              0.04s\n2/5 test_ipmb           OK              0.03s\n3/5 MCTPReactor         OK              0.02s\n4/5 MCTPEndpoint        OK              0.02s\n5/5 NvidiaGPU           OK              0.01s\n\nOk:                5   \nFail:              0   \n```",
      "range": {
        "startLine": 9,
        "startChar": 49,
        "endLine": 11,
        "endChar": 24
      },
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "4ddad50a_c090d3c7",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-24T23:06:47Z",
      "side": 1,
      "message": "Correct, it\u0027s not required to use the files, but it is required to use any dependencies or variables within, which could be reused.",
      "parentUuid": "ae1a8721_53280464",
      "range": {
        "startLine": 9,
        "startChar": 49,
        "endLine": 11,
        "endChar": 24
      },
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "46903636_5b77df84",
        "filename": "/COMMIT_MSG",
        "patchSetId": 3
      },
      "lineNbr": 11,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-11-25T09:50:16Z",
      "side": 1,
      "message": "If that\u0027s the actual reason, it makes more sense to me now. Thanks for explaining.",
      "parentUuid": "4ddad50a_c090d3c7",
      "range": {
        "startLine": 9,
        "startChar": 49,
        "endLine": 11,
        "endChar": 24
      },
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "b26f9bb2_dcc7c4e9",
        "filename": "src/tests/meson.build",
        "patchSetId": 3
      },
      "lineNbr": 2,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-11-24T22:50:10Z",
      "side": 1,
      "message": "We can use `subdir_done()` to avoid all the extra indentation.\n\nhttps://mesonbuild.com/Reference-manual_functions.html#subdir_done\n\nsomething like\n\n```\nif not get_option(\u0027tests\u0027).allowed()\n  subdir_done()\nendif\n```\n\nIf it works for you we could apply throughout the patch.",
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "60cde392_ae7daa3c",
        "filename": "src/tests/meson.build",
        "patchSetId": 3
      },
      "lineNbr": 2,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-24T23:06:47Z",
      "side": 1,
      "message": "I wasn\u0027t aware of that method.  Seems reasonable, I\u0027m not sure i\u0027ll have time to make that patch soon, but I can try.  Can you try 1 quick example from this patch and see if subdir_done() solves this in a way that\u0027s acceptable to you?",
      "parentUuid": "b26f9bb2_dcc7c4e9",
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "baa95db8_0c0cf268",
        "filename": "src/tests/meson.build",
        "patchSetId": 3
      },
      "lineNbr": 2,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-11-25T09:50:16Z",
      "side": 1,
      "message": "I tried with `mctp` and `nvidia-gpu` and for both cases it works and results in less diff and indentation.",
      "parentUuid": "60cde392_ae7daa3c",
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "0fceac27_95351f85",
        "filename": "src/tests/meson.build",
        "patchSetId": 3
      },
      "lineNbr": 2,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-26T17:07:34Z",
      "side": 1,
      "message": "ACK, will implement when I get a moment.",
      "parentUuid": "baa95db8_0c0cf268",
      "revId": "6e886b41a40db40f6ed5da969cb538eac6c87c57",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}