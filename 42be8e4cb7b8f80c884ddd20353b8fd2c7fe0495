{
  "comments": [
    {
      "unresolved": true,
      "key": {
        "uuid": "3a05ff73_8740162e",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 21,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2025-10-21T17:11:50Z",
      "side": 1,
      "message": "I suppose psu sensor would also has an Unavailable interface, if yes, then it should be marked as true while the sensor reading is being skipped.",
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "27dfd1b0_e177fe73",
        "filename": "/COMMIT_MSG",
        "patchSetId": 5
      },
      "lineNbr": 21,
      "author": {
        "id": 1001127
      },
      "writtenOn": "2025-11-06T08:48:00Z",
      "side": 1,
      "message": "Done",
      "parentUuid": "3a05ff73_8740162e",
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "38f1f32e_8a9c0c36",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000021
      },
      "writtenOn": "2025-10-01T05:00:08Z",
      "side": 1,
      "message": "I question if this should be pushed from the update process vs the monitor knowing that firmware update update flow.",
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7628d5a7_61f44e4f",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1001712
      },
      "writtenOn": "2025-10-01T08:56:35Z",
      "side": 1,
      "message": "You mean something like a DBus method or property to pause the reading from fw update side? Or is there already something which can be used.\n\nAre there any tradeoffs which make it better to perform the logic on fw update side.",
      "parentUuid": "38f1f32e_8a9c0c36",
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "2505e978_17e3a9b8",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-10-21T17:57:55Z",
      "side": 1,
      "message": "Some net comments here:\nThe intent of specifying the type in the EM config is so that we can make decisions like this based on the actual behavior of the device.  I don\u0027t see that handled, and presumably you didn\u0027t check all 100+ devices datasheets to verify that they can\u0027t handle sensor polling at the same time as update, so I would expect some amount of lookup table there.\n\nThe other intent of reactors was that one application would handle communication to the device, to make things like this easy to manage.  As written, there\u0027s still races around if a sensor read is in progress when an update starts, and I don\u0027t know how to handle that without a complex IPC, or one application managing the device.\n\n@paligill@gmail.com I think i mentioned this use case on your design.  Was this covered there?",
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "07a2ac37_b82dbf73",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2025-10-21T22:16:53Z",
      "side": 1,
      "message": "\u003e As written, there\u0027s still races around if a sensor read is in progress when an update starts, and I don\u0027t know how to handle that without a complex IPC, or one application managing the device.\n\u003e \n\u003e @paligill@gmail.com I think i mentioned this use case on your design.  Was this covered there?\n\nSorry, i don\u0027t remember if any such case was mentioned during design discussions. For the other point you mentioned about the race condition, i can understand it can happen, probably may need some hold down time before starting an upgrade to let the channel clear up.",
      "parentUuid": "2505e978_17e3a9b8",
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "6bfe1898_318cde7a",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1001127
      },
      "writtenOn": "2025-11-06T08:48:00Z",
      "side": 1,
      "message": "Yes, Software.I2CVR needs to wait a while after changing Activation and before starting the upgrade.\n\nNot all VR devices require monitoring to be paused during firmware updates.\nhttps://gerrit.openbmc.org/c/openbmc/entity-manager/+/83964\nuses `FirmwareName` as an opt-in mechanism. Add it to the EM config only for VR devices that experience PMBus conflicts during updates. Devices without this property continue monitoring uninterrupted.",
      "parentUuid": "07a2ac37_b82dbf73",
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "c8414526_64a5d080",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-11-10T15:25:49Z",
      "side": 1,
      "message": "\u003e uses FirmwareName as an opt-in mechanism. Add it to the EM config only for VR devices that experience PMBus conflicts during updates\n\nThe \"Firmware name\" doesn\u0027t determine whether a device handles updates or not.  That\u0027s not a per-system decision, that\u0027s a per-device decision, so it goes in code, not an EM config.\n\nOriginal issue is still present, I\u0027m not sure why this was resolved.",
      "parentUuid": "6bfe1898_318cde7a",
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "702a4566_81c606e7",
        "filename": "/PATCHSET_LEVEL",
        "patchSetId": 5
      },
      "lineNbr": 0,
      "author": {
        "id": 1001127
      },
      "writtenOn": "2025-11-14T07:10:12Z",
      "side": 1,
      "message": "Changed to use a lookup table of specific firmware types. psusensor scans EM config for these firmware types and builds a mapping by bus/address. Only sensors whose bus/address matches these firmware configs get paused during updates. It reuses existing I2CVR firmware configurations without requiring new EM properties.\n\nhttps://gerrit.openbmc.org/c/openbmc/phosphor-bmc-code-mgmt/+/85233\nadds a delay after changing Activation and before starting the upgrade, giving psusensor time to detect the signal and pause polling before firmware commands begin.",
      "parentUuid": "c8414526_64a5d080",
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "f4ecfe6e_790e8bad",
        "filename": "src/psu/PSUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 185,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2025-10-21T17:11:50Z",
      "side": 1,
      "message": "Lets name firmwareAssociations to something better as it gets confused with Dbus association, but looks like this a local object to store the state.",
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "0a0a6165_915e45f4",
        "filename": "src/psu/PSUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 185,
      "author": {
        "id": 1001127
      },
      "writtenOn": "2025-11-06T08:48:00Z",
      "side": 1,
      "message": "OK. changed to firmwareUpdateStates.",
      "parentUuid": "f4ecfe6e_790e8bad",
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "a65c3d63_adc67dea",
        "filename": "src/psu/PSUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 332,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2025-10-21T17:11:50Z",
      "side": 1,
      "message": "Shouldn\u0027t you skip if the activating state was unchanged?",
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "a7131916_0da1aab6",
        "filename": "src/psu/PSUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 332,
      "author": {
        "id": 1001127
      },
      "writtenOn": "2025-11-06T08:48:00Z",
      "side": 1,
      "message": "Done. Thanks for the suggestion.",
      "parentUuid": "a65c3d63_adc67dea",
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "8c4f9d69_427e0fae",
        "filename": "src/psu/PSUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 344,
      "author": {
        "id": 1001758
      },
      "writtenOn": "2025-10-21T17:11:50Z",
      "side": 1,
      "message": "Can you please add a comment about why are you creating this name for lookup and which object state are you trying to update?",
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "095124e6_ac2f801c",
        "filename": "src/psu/PSUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 344,
      "author": {
        "id": 1001127
      },
      "writtenOn": "2025-11-06T08:48:00Z",
      "side": 1,
      "message": "combineEvents is the existing map of PSUEvent instances. PSUEvent instances poll sysfs attributes such as xxx_crit_alarm and xxx_lcrit_alarm.",
      "parentUuid": "8c4f9d69_427e0fae",
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "07873a4f_cb2c429e",
        "filename": "src/psu/PSUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 353,
      "author": {
        "id": 1002222
      },
      "writtenOn": "2025-11-03T09:36:49Z",
      "side": 1,
      "message": "Can you split this function into two? One setting up the match, the other handling the firmware update, both called from main?",
      "range": {
        "startLine": 353,
        "startChar": 0,
        "endLine": 353,
        "endChar": 30
      },
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "7c1ab7c6_e86d7242",
        "filename": "src/psu/PSUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 353,
      "author": {
        "id": 1001127
      },
      "writtenOn": "2025-11-06T08:48:00Z",
      "side": 1,
      "message": "separated to `setupFirmwareUpdateMatch()` setting up the match for Activation signal; `checkInitialFwUpdateState` checking initial firmware component Activation state.",
      "parentUuid": "07873a4f_cb2c429e",
      "range": {
        "startLine": 353,
        "startChar": 0,
        "endLine": 353,
        "endChar": 30
      },
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": true,
      "key": {
        "uuid": "183ab59a_253186d3",
        "filename": "src/psu/PSUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 362,
      "author": {
        "id": 1000153
      },
      "writtenOn": "2025-10-21T17:57:55Z",
      "side": 1,
      "message": "These paths aren\u0027t connected at all.  There\u0027s no gaurantee that these names are the same device in the em config.",
      "range": {
        "startLine": 360,
        "startChar": 0,
        "endLine": 362,
        "endChar": 49
      },
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    },
    {
      "unresolved": false,
      "key": {
        "uuid": "67cf9d1c_c2a6a456",
        "filename": "src/psu/PSUSensorMain.cpp",
        "patchSetId": 5
      },
      "lineNbr": 362,
      "author": {
        "id": 1001127
      },
      "writtenOn": "2025-11-06T08:48:00Z",
      "side": 1,
      "message": "The `FirmwareName` must match the firmware object\u0027s base name from its object path. Each firmware object has an individual name. For example, both objects below have the same type but different names:\n{\n    \"Name\": \"Yosemite5_MB_VR_SOC\",\n    \"Type\": \"MP2X6XXFirmware\",\n    ...\n},\n{\n    \"Name\": \"Yosemite5_MB_VR_CPU0\",\n    \"Type\": \"MP2X6XXFirmware\",\n    ...\n}",
      "parentUuid": "183ab59a_253186d3",
      "range": {
        "startLine": 360,
        "startChar": 0,
        "endLine": 362,
        "endChar": 49
      },
      "revId": "42be8e4cb7b8f80c884ddd20353b8fd2c7fe0495",
      "serverId": "adbd0a64-1f21-4d83-b585-671fe73cb6e4"
    }
  ]
}